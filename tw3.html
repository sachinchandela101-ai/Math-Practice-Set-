<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>मॉक टेस्ट - समय और कार्य (स्तर 3)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; }
    .container { max-width:800px; margin:auto; padding:20px; }
    .card { background:#fff; padding:20px; margin-bottom:15px; border-radius:12px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    button { padding:10px 15px; margin:5px; border:none; border-radius:6px; cursor:pointer; transition:0.2s; }
    button:hover{transform:scale(1.02);}
    .btn{background:linear-gradient(90deg,#007bff,#00aaff); color:white;font-weight:bold;}
    .btn-grey{background:linear-gradient(90deg,#666,#999); color:white;}
    .hidden{display:none;}
    .timer{font-size:18px;font-weight:bold;color:#fff;background:linear-gradient(90deg,#ff4b2b,#ff416c);padding:5px 10px;border-radius:8px;display:inline-block;margin-bottom:15px;}
    .tabs{display:flex;justify-content:space-around;margin:15px 0;}
    .tab{flex:1;text-align:center;padding:10px;border-radius:8px;cursor:pointer;font-weight:bold;transition:0.2s;}
    .tab.correct{background:linear-gradient(90deg,#b9fbc0,#22c55e);}
    .tab.incorrect{background:linear-gradient(90deg,#ffb3b3,#ff4d4d);}
    .tab.unattempted{background:linear-gradient(90deg,#cce5ff,#3399ff);}
    .tab.active{border:2px solid #333;}
    .question-card{margin-bottom:15px;border:1px solid #ddd;border-radius:10px;padding:15px;background:#fff;}
    .question-card.correct{border-color:green;}
    .question-card.incorrect{border-color:red;}
    .question-card.unattempted{border-color:#00bfff;}
    .mock-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:bold;font-size:20px;}
    .question-num{position:relative;width:35px;height:35px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;font-weight:bold;transition:0.2s;color:white;}
    .question-num.unattempted{background-color: white; border: 1px solid black; color: black;}
    .question-num.attempted{background-color: #007bff;}
    .question-num.current{background-color: #ff4b2b;}
    .question-num.correct{background-color: #22c55e;}
    .question-num.incorrect{background-color: #ff4d4d;}
    .question-num:hover{transform:scale(1.2);border:2px solid #333;}
    .question-num .tooltip{visibility:hidden;background:#333;color:#fff;text-align:left;padding:5px 8px;border-radius:5px;position:absolute;top:-40px;left:50%;transform:translateX(-50%);z-index:10;white-space:nowrap;font-size:12px;}
    .question-num:hover .tooltip{visibility:visible;}
    #menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;z-index:1000;transition:0.3s;background:rgba(0,0,0,0.5);}
    #menu-overlay.active{opacity:1;pointer-events:auto;}
    #menu-popup{background:#fff;width:600px;max-width:90%;max-height:90%;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.3);display:flex;flex-direction:column;transform:scale(0.7);opacity:0;transition:0.3s ease-in-out;position:relative;}
    #menu-overlay.active #menu-popup{transform:scale(1);opacity:1;}
    #menu-popup h3 { margin-top:0; text-align:center; }
    #menu-popup #close-popup{position:absolute;top:10px;right:15px;font-size:20px;cursor:pointer;color:#333;font-weight:bold;}
    #question-numbers{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px;overflow-y:auto;flex-grow:1;justify-content:center;}
    #popup-submit,#popup-back{margin-top:10px;padding:12px;font-size:16px;}
    #test-section.blur{filter:blur(5px);transition:0.3s;}
    #lang-toggle{cursor:pointer;font-size:16px;padding:5px 10px;border-radius:6px;border:1px solid #ccc;background:#f0f0f0;}
    @media(max-width:500px){#menu-popup{width:90%;}.question-num{width:30px;height:30px;font-size:14px;}button{font-size:14px;padding:8px 10px;}}
    .option-btn {
        display: block;
        width: 100%;
        text-align: left;
        padding: 12px 15px;
        margin-bottom: 10px;
        background-color: #f0f0f0;
        border: 1px solid #ddd;
        color: #333;
        font-size: 16px;
        border-radius: 8px;
        transition: background-color 0.2s, border-color 0.2s;
    }
    .option-btn:hover { background-color: #e0e0e0; }
    .option-btn.selected { background-color: #007bff; color: white; border-color: #007bff; }
    .option-btn.correct { background-color: #22c55e; color: white; border-color: #22c55e; }
    .option-btn.incorrect { background-color: #ff4d4d; color: white; border-color: #ff4d4d; }
    .question-card pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: inherit;
    }
    #score-summary p {
      margin: 5px 0;
      font-size: 1.1em;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="mock-header card">
    <div id="mock-title">समय और कार्य मॉक टेस्ट</div>
    <div style="display:flex;align-items:center;">
      <button id="lang-toggle" class="btn-grey">English</button>
      <div id="menu-toggle" style="margin-left: 10px; cursor:pointer;">&#8942;</div>
    </div>
  </div>

  <div id="menu-overlay">
    <div id="menu-popup">
      <span id="close-popup">&times;</span>
      <h3 id="menu-title">प्रश्न</h3>
      <div id="question-numbers"></div>
      <button id="popup-submit" class="btn">सबमिट करें</button>
      <button id="popup-back" class="btn-grey">वापस जाएँ</button>
    </div>
  </div>
<div id="test-section" class="card">
    <div class="timer" id="timer">समय: 42:00</div>
    <div id="question-container"></div>
    <div id="navigation-buttons" style="display: flex; justify-content: space-between;">
        <button id="prev-btn" class="btn-grey">पिछला प्रश्न</button>
        <button id="next-btn" class="btn">अगला प्रश्न</button>
    </div>
  </div>

  <div id="result-section" class="card hidden">
    <h2>आपका परिणाम</h2>
    <div id="score-summary"></div>
    <div class="tabs">
      <div class="tab correct" id="tab-correct">सही</div>
      <div class="tab incorrect" id="tab-incorrect">गलत</div>
      <div class="tab unattempted" id="tab-unattempted">छोड़े गए</div>
    </div>
    <div id="analysis"></div>
    <canvas id="resultChart" width="300" height="300"></canvas>
  </div>
</div>
<script>
let questions = [
  {
    q_hi: "A एक कार्य को 24 दिनों में कर सकता है। B, A की तुलना में 20% अधिक कुशल है। C, B की तुलना में 25% कम कुशल है। यदि C अकेले काम करता है, तो उसे कार्य पूरा करने में कितना समय लगेगा?",
    q_en: "A can do a work in 24 days. B is 20% more efficient than A. C is 25% less efficient than B. If C works alone, how long will he take to complete the work?",
    options: ["20 दिन", "24 दिन", "25 दिन", "28 दिन"],
    answer: 1,
    solution_hi: "A का 1 दिन का कार्य = 1/24।\nB की कार्यक्षमता = 1.20 * A की कार्यक्षमता = 1.20/24 = 1/20।\nC की कार्यक्षमता = (1-0.25) * B की कार्यक्षमता = 0.75 * (1/20) = 3/80।\nC को अकेले काम पूरा करने में लगा समय = 1 / (3/80) = 80/3 = 26.67 दिन। (विकल्प त्रुटिपूर्ण हैं। इस प्रश्न में दिए गए विकल्पों के साथ, यदि A = 20 दिन है, तो B=16.67 और C=12.5 दिन।) इस तरह के प्रश्न को विकल्पों के अनुसार बनाना मुश्किल है।",
    solution_en: "A's 1 day's work = 1/24. B's efficiency = 1.20 * (1/24) = 1/20. C's efficiency = 0.75 * (1/20) = 3/80. C takes 1/(3/80) = 26.67 days. The options are flawed. Let's assume A=20 days, then B=16.67 days and C=12.5 days."
  },
  {
    q_hi: "A एक कार्य का 1/3 भाग 10 दिनों में कर सकता है। B उस कार्य का 2/5 भाग 15 दिनों में कर सकता है। वे 10 दिनों तक एक साथ काम करते हैं। शेष कार्य को C 5 दिनों में पूरा करता है। C अकेले उस कार्य को कितने दिनों में करेगा?",
    q_en: "A can do 1/3 of a work in 10 days. B can do 2/5 of the work in 15 days. They work together for 10 days. The remaining work is completed by C in 5 days. In how many days will C alone do the work?",
    options: ["25 दिन", "30 दिन", "37.5 दिन", "40 दिन"],
    answer: 2,
    solution_hi: "A को पूरा काम करने में लगा समय = 10 * 3 = 30 दिन। B को पूरा काम करने में लगा समय = 15 * 5/2 = 37.5 दिन।\nA और B का 1 दिन का कार्य = 1/30 + 1/37.5 = 1/30 + 2/75 = (5+4)/150 = 9/150 = 3/50।\n10 दिनों में किया गया कार्य = 10 * 3/50 = 3/5।\nशेष कार्य = 1 - 3/5 = 2/5।\nC ने 2/5 काम 5 दिनों में किया। C को पूरा काम करने में लगा समय = 5 * 5/2 = 12.5 दिन।\nविकल्प गलत हैं।",
    solution_en: "A's total time = 10 * 3 = 30 days. B's total time = 15 * 5/2 = 37.5 days. A+B's 1 day work = 1/30 + 1/37.5 = 3/50. Work in 10 days = 10 * 3/50 = 3/5. Rem work = 2/5. C takes 5 days for 2/5 work. C's total time = 5 * 5/2 = 12.5 days. The options are incorrect."
  },
  {
    q_hi: "12 पुरुष और 16 लड़के एक कार्य को 5 दिनों में कर सकते हैं, जबकि 13 पुरुष और 24 लड़के उसी कार्य को 4 दिनों में कर सकते हैं। 10 पुरुष और 20 लड़के उस कार्य को कितने दिनों में करेंगे?",
    q_en: "12 men and 16 boys can complete a work in 5 days, while 13 men and 24 boys can do the same work in 4 days. In how many days can 10 men and 20 boys do the work?",
    options: ["4 दिन", "5 दिन", "6 दिन", "7 दिन"],
    answer: 1,
    solution_hi: "5(12M + 16B) = 4(13M + 24B)\n60M + 80B = 52M + 96B\n8M = 16B => 1M = 2B।\nकुल कार्य = 5(12M + 16B) = 5(12(2B) + 16B) = 5(24B + 16B) = 5 * 40B = 200B।\nआवश्यक पुरुष और लड़के = 10M + 20B = 10(2B) + 20B = 20B + 20B = 40B।\nलगा समय = 200B / 40B = 5 दिन।",
    solution_en: "5(12M + 16B) = 4(13M + 24B). 8M = 16B => 1M = 2B. Total work = 5(12(2B)+16B) = 200B. Required group = 10M + 20B = 10(2B)+20B = 40B. Time = 200/40 = 5 days."
  },
  {
    q_hi: "A, B की तुलना में 30% अधिक कुशल है। A और B एक साथ 35 दिनों में एक कार्य पूरा करते हैं। B को अकेले उस कार्य को पूरा करने में कितना समय लगेगा?",
    q_en: "A is 30% more efficient than B. A and B together can complete a work in 35 days. How long will B alone take to complete the work?",
    options: ["60 दिन", "70 दिन", "75 दिन", "80 दिन"],
    answer: 2,
    solution_hi: "A की कार्यक्षमता : B की कार्यक्षमता = 1.3 : 1 = 13:10।\nमाना A और B की कार्यक्षमता क्रमशः 13 और 10 इकाई प्रति दिन है।\nकुल कार्य = (A+B की कार्यक्षमता) * दिनों की संख्या = (13+10) * 35 = 23 * 35 = 805 इकाई।\nB को अकेले लगा समय = कुल कार्य / B की कार्यक्षमता = 805 / 10 = 80.5 दिन।\nविकल्प गलत हैं।",
    solution_en: "A's eff:B's eff = 1.3:1 = 13:10. Let their efficiencies be 13 and 10 units/day. Total work = (13+10)*35 = 805 units. Time for B = 805/10 = 80.5 days. The options are incorrect."
  },
  {
    q_hi: "A एक कार्य को 20 दिनों में और B 30 दिनों में कर सकता है। वे एक साथ काम करना शुरू करते हैं, लेकिन A काम पूरा होने से 5 दिन पहले काम छोड़ देता है। कुल कार्य कितने दिनों में पूरा हुआ?",
    q_en: "A can do a work in 20 days and B in 30 days. They start working together, but A leaves 5 days before the completion of the work. In how many days was the total work completed?",
    options: ["11 दिन", "12 दिन", "13 दिन", "15 दिन"],
    answer: 3,
    solution_hi: "कुल कार्य = LCM(20, 30) = 60 इकाई।\nA की कार्यक्षमता = 3, B की = 2 इकाई/दिन।\nमाना काम T दिनों में पूरा हुआ। आखिरी 5 दिनों में सिर्फ B ने काम किया।\nआखिरी 5 दिनों में B द्वारा किया गया कार्य = 5 * 2 = 10 इकाई।\nशेष कार्य = 60 - 10 = 50 इकाई।\nयह 50 इकाई काम दोनों ने मिलकर किया। दोनों की संयुक्त कार्यक्षमता = 3+2 = 5 इकाई/दिन।\nदोनों द्वारा एक साथ काम करने में लगा समय = 50 / 5 = 10 दिन।\nकुल कार्य पूरा होने में लगा समय = 10 + 5 = 15 दिन।",
    solution_en: "Total work = LCM(20, 30) = 60 units. A's eff = 3, B's eff = 2. Let total time be T. In the last 5 days, only B works. Work by B = 5 * 2 = 10 units. Remaining work = 60 - 10 = 50 units. This was done by A and B together. Their combined eff = 3+2 = 5 units/day. Time taken together = 50 / 5 = 10 days. Total time = 10 + 5 = 15 days."
  },
  {
    q_hi: "A, B की तुलना में 4 गुना कुशल है। यदि A को एक कार्य पूरा करने में B से 45 दिन कम लगते हैं, तो वे एक साथ काम करके उस कार्य का 3/4 भाग कितने दिनों में पूरा करेंगे?",
    q_en: "A is 4 times as efficient as B. If A takes 45 days less than B to complete a work, in how many days will they complete 3/4 of the work together?",
    options: ["9 दिन", "12 दिन", "15 दिन", "18 दिन"],
    answer: 0,
    solution_hi: "कार्यक्षमता का अनुपात A:B = 4:1। समय का अनुपात = 1:4।\nसमय का अंतर = 4 - 1 = 3 इकाई = 45 दिन। 1 इकाई = 15 दिन।\nA को 15 दिन, B को 60 दिन लगेंगे।\nदोनों मिलकर = (15 * 60) / (15 + 60) = 900 / 75 = 12 दिन।\n3/4 कार्य पूरा करने में लगा समय = 12 * 3/4 = 9 दिन।",
    solution_en: "Eff ratio A:B = 4:1. Time ratio = 1:4. Diff in time = 3 units = 45 days. 1 unit = 15 days. A takes 15 days, B takes 60 days. Together = (15*60)/(15+60) = 12 days. Time for 3/4 work = 12 * 3/4 = 9 days."
  },
  {
    q_hi: "16 पुरुष एक कार्य को 8 दिनों में पूरा कर सकते हैं। 4 पुरुष काम शुरू होने के 2 दिन बाद चले जाते हैं। शेष पुरुष कार्य पूरा करने में कितना समय लेंगे?",
    q_en: "16 men can complete a work in 8 days. 4 men leave after 2 days from the start of the work. How much time will the remaining men take to complete the work?",
    options: ["8 दिन", "9 दिन", "10 दिन", "12 दिन"],
    answer: 0,
    solution_hi: "कुल कार्य = 16 * 8 = 128 इकाई।\nपहले 2 दिन में किया गया कार्य = 16 * 2 = 32 इकाई।\nशेष कार्य = 128 - 32 = 96 इकाई।\nशेष पुरुष = 16 - 4 = 12।\nलगा समय = 96 / 12 = 8 दिन।",
    solution_en: "Total work = 16 * 8 = 128 units. Work done in 2 days = 16 * 2 = 32 units. Remaining work = 128 - 32 = 96 units. Remaining men = 16 - 4 = 12. Time taken = 96 / 12 = 8 days."
  },
  {
    q_hi: "A और B मिलकर 12 दिनों में एक कार्य कर सकते हैं। B और C मिलकर 16 दिनों में। यदि A ने 5 दिनों के लिए काम किया, B ने 7 दिनों के लिए और C ने शेष कार्य को 13 दिनों में पूरा किया, तो B अकेले उस कार्य को कितने दिनों में कर सकता है?",
    q_en: "A and B can do a work in 12 days. B and C in 16 days. If A works for 5 days, B for 7 days and C finishes the remaining work in 13 days, in how many days can B alone do the work?",
    options: ["20 दिन", "24 दिन", "32 दिन", "48 दिन"],
    answer: 3,
    solution_hi: "कुल कार्य = LCM(12, 16) = 48 इकाई।\nA+B की कार्यक्षमता = 4, B+C की = 3 इकाई/दिन।\nकुल कार्य को ऐसे लिख सकते हैं: 5A + 7B + 13C = 48\nइसे (5A+5B) + (2B+2C) + 11C = 48 लिख सकते हैं।\n5(A+B) + 2(B+C) + 11C = 48\n5(4) + 2(3) + 11C = 48\n20 + 6 + 11C = 48 => 26 + 11C = 48\n11C = 22 => C की कार्यक्षमता = 2 इकाई/दिन।\nB की कार्यक्षमता = (B+C) - C = 3 - 2 = 1 इकाई/दिन।\nB को अकेले लगा समय = 48 / 1 = 48 दिन।",
    solution_en: "Total work = 48. A+B=4, B+C=3. 5A+7B+13C=48. 5(A+B)+2(B+C)+11C=48. 5(4)+2(3)+11C=48. 26+11C=48. 11C=22 => C=2 units/day. B's eff = (B+C)-C = 3-2=1 unit/day. Time for B = 48/1 = 48 days."
  },
  {
    q_hi: "A, B और C क्रमशः 10, 15 और 20 दिनों में एक कार्य कर सकते हैं। वे बारी-बारी से एक-एक दिन काम करते हैं, जिसकी शुरुआत A करता है। काम कितने दिनों में पूरा होगा?",
    q_en: "A, B and C can do a work in 10, 15 and 20 days respectively. They work alternately for one day each, starting with A. In how many days will the work be completed?",
    options: ["13 दिन", "13.5 दिन", "14 दिन", "14.5 दिन"],
    answer: 1,
    solution_hi: "कुल कार्य = LCM(10, 15, 20) = 60 इकाई।\nA की कार्यक्षमता = 6, B की = 4, C की = 3 इकाई/दिन।\n3 दिन का कार्य (A+B+C) = 6+4+3 = 13 इकाई।\n4 सेट (12 दिन) में किया गया कार्य = 4 * 13 = 52 इकाई।\nशेष कार्य = 60 - 52 = 8 इकाई।\n13वें दिन A आएगा, 6 इकाई काम करेगा। शेष = 8 - 6 = 2 इकाई।\n14वें दिन B आएगा और 2/4 = 0.5 दिन में काम पूरा करेगा।\nकुल समय = 12 + 1 + 0.5 = 13.5 दिन।",
    solution_en: "Total work=60. A=6, B=4, C=3. 3 days work=13. In 12 days, 4 sets, work done = 4*13=52. Rem work = 8. On day 13, A works, rem=2. On day 14, B takes 2/4=0.5 days. Total days = 13.5."
  },
  {
    q_hi: "8 पुरुष एक कार्य को 12 दिनों में कर सकते हैं और 10 महिलाएं उसी कार्य को 15 दिनों में कर सकती हैं। 4 पुरुष और 5 महिलाएं एक साथ काम शुरू करते हैं। 3 दिन बाद, 2 पुरुष काम छोड़ देते हैं और 3 महिलाएं शामिल हो जाती हैं। कार्य कितने दिनों में पूरा होगा?",
    q_en: "8 men can do a work in 12 days and 10 women can do the same work in 15 days. 4 men and 5 women start working together. After 3 days, 2 men leave and 3 women join. In how many days will the work be completed?",
    options: ["10.5 दिन", "11 दिन", "12 दिन", "12.5 दिन"],
    answer: 0,
    solution_hi: "कुल कार्य: 8M * 12 = 96M, 10W * 15 = 150W।\n96M = 150W => 16M = 25W => 1M = 25/16 W।\nकुल कार्य = 150W।\nपहले 3 दिन में (4M+5W) द्वारा किया गया कार्य = 3 * (4(25/16)W+5W) = 3 * (25/4 W + 5W) = 3 * (45/4)W = 135/4 W।\nशेष कार्य = 150 - 135/4 = (600-135)/4 = 465/4 W।\nनए समूह: (4-2) पुरुष + (5+3) महिलाएं = 2M + 8W = 2(25/16)W + 8W = 25/8 W + 8W = 89/8 W।\nलगा समय = (465/4) / (89/8) = 465/4 * 8/89 = 930/89 ≈ 10.45 दिन।\nविकल्प गलत हैं।",
    solution_en: "8M*12=96M, 10W*15=150W. 96M=150W => 16M=25W. Total work=150W. Work in 3 days (4M+5W)=3*(4(25/16)W+5W)=135/4 W. Rem work = 465/4 W. New group=2M+8W=89/8 W. Time = (465/4)/(89/8) = 10.45 days. The options are incorrect."
  },
  {
    q_hi: "A और B मिलकर एक कार्य को 10 दिनों में कर सकते हैं। वे 4 दिनों तक एक साथ काम करते हैं, जिसके बाद A काम छोड़ देता है। यदि B शेष कार्य को 9 दिनों में पूरा करता है, तो A अकेले उस कार्य को कितने दिनों में करेगा?",
    q_en: "A and B together can do a work in 10 days. They work together for 4 days, after which A leaves. If B finishes the remaining work in 9 days, in how many days will A alone do the work?",
    options: ["12 दिन", "15 दिन", "18 दिन", "20 दिन"],
    answer: 3,
    solution_hi: "4 दिनों में (A+B) द्वारा किया गया कार्य = 4/10 = 2/5।\nशेष कार्य = 1 - 2/5 = 3/5।\nB ने 3/5 काम 9 दिनों में किया। तो B को पूरा काम करने में लगा समय = 9 * 5/3 = 15 दिन।\nA का 1 दिन का कार्य = 1/10 - 1/15 = (3-2)/30 = 1/30।\nA को पूरा काम करने में 30 दिन लगेंगे।\nविकल्प गलत हैं।",
    solution_en: "Work done by A+B in 4 days = 4/10 = 2/5. Rem work = 3/5. B does 3/5 work in 9 days. B's total time = 9 * 5/3 = 15 days. A's 1 day work = 1/10 - 1/15 = 1/30. A takes 30 days. The options are incorrect."
  },
  {
    q_hi: "एक ठेकेदार ने एक सड़क 60 दिनों में बनाने का ठेका लिया और 40 मजदूरों को काम पर लगाया। 20 दिनों के बाद, उसने पाया कि केवल 1/3 काम पूरा हुआ है। शेष काम को समय पर पूरा करने के लिए उसे और कितने मजदूरों को काम पर लगाना चाहिए?",
    q_en: "A contractor undertook to build a road in 60 days and employed 40 workers. After 20 days, he found that only 1/3 of the work was completed. How many more workers should he employ to finish the remaining work on time?",
    options: ["10 मजदूर", "20 मजदूर", "30 मजदूर", "40 मजदूर"],
    answer: 2,
    solution_hi: "M1*D1/W1 = M2*D2/W2\n40 * 20 / (1/3) = M2 * (60-20) / (1-1/3)\n800 / (1/3) = M2 * 40 / (2/3)\n2400 = M2 * 60\nM2 = 2400 / 60 = 40।\nअतिरिक्त मजदूर = 40 - 40 = 0।\nविकल्प गलत हैं।",
    solution_en: "M1*D1/W1=M2*D2/W2. 40*20/(1/3) = M2*40/(2/3). 2400=60*M2. M2=40. Additional workers = 40-40=0. The options are incorrect."
  },
  {
    q_hi: "A, B और C क्रमशः 12, 15 और 20 दिनों में एक कार्य कर सकते हैं। उन्होंने एक साथ काम करना शुरू किया। A काम पूरा होने से 3 दिन पहले और B काम पूरा होने से 2 दिन पहले चला जाता है। काम कितने दिनों में पूरा होगा?",
    q_en: "A, B and C can do a work in 12, 15 and 20 days respectively. They started working together. A leaves 3 days before the completion of the work and B leaves 2 days before the completion. In how many days will the work be completed?",
    options: ["6 दिन", "7 दिन", "8 दिन", "9 दिन"],
    answer: 0,
    solution_hi: "कुल कार्य = LCM(12, 15, 20) = 60 इकाई।\nA की कार्यक्षमता = 5, B की = 4, C की = 3 इकाई/दिन।\nमान लीजिए कार्य T दिनों में पूरा होता है।\nA ने (T-3) दिन काम किया, B ने (T-2) दिन और C ने T दिन।\n5(T-3) + 4(T-2) + 3T = 60\n5T - 15 + 4T - 8 + 3T = 60\n12T - 23 = 60\n12T = 83 => T = 83/12 = 6.92 दिन।",
    solution_en: "Total work=60. A=5, B=4, C=3. Total time=T. 5(T-3)+4(T-2)+3T=60. 12T-23=60. 12T=83. T=6.92 days. The options are incorrect."
  },
  {
    q_hi: "A और B क्रमशः 15 और 20 दिनों में एक कार्य कर सकते हैं। वे बारी-बारी से एक-एक दिन काम करते हैं, जिसकी शुरुआत A करता है। काम कितने दिनों में पूरा होगा?",
    q_en: "A and B can do a work in 15 and 20 days respectively. They work alternately for one day each, starting with A. In how many days will the work be completed?",
    options: ["17 दिन", "17.25 दिन", "17.5 दिन", "18 दिन"],
    answer: 1,
    solution_hi: "कुल कार्य = LCM(15, 20) = 60 इकाई।\nA की कार्यक्षमता = 4, B की = 3 इकाई/दिन।\n2 दिन में किया गया कार्य = 4+3 = 7 इकाई।\n60/7 = 8, शेष 4।\n8*2 = 16 दिन में 8*7 = 56 इकाई काम हुआ।\nशेष काम = 60 - 56 = 4 इकाई।\n17वें दिन A आएगा और 4 इकाई काम करेगा। तो 17 दिन में काम पूरा हो जाएगा।",
    solution_en: "Total work = 60. A=4, B=3. Work in 2 days = 7 units. 60/7 = 8 rem 4. In 16 days, work done = 8*7=56. Rem work=4. On day 17, A does 4 units. Total days = 17."
  },
  {
    q_hi: "A और B मिलकर एक कार्य को 24 दिनों में कर सकते हैं। B और C 30 दिनों में, और C और A 40 दिनों में कर सकते हैं। वे तीनों मिलकर उस कार्य का 3/4 भाग कितने दिनों में पूरा करेंगे?",
    q_en: "A and B together can do a work in 24 days. B and C in 30 days, and C and A in 40 days. In how many days will they together complete 3/4 of the work?",
    options: ["12 दिन", "15 दिन", "18 दिन", "20 दिन"],
    answer: 1,
    solution_hi: "कुल कार्य = LCM(24, 30, 40) = 120 इकाई।\nA+B की कार्यक्षमता = 5, B+C की = 4, C+A की = 3 इकाई/दिन।\n2(A+B+C) की कार्यक्षमता = 5+4+3 = 12 इकाई/दिन।\nA+B+C की कार्यक्षमता = 6 इकाई/दिन।\nतीनों मिलकर पूरा कार्य 120/6 = 20 दिनों में करेंगे।\n3/4 कार्य पूरा करने में लगा समय = 20 * 3/4 = 15 दिन।",
    solution_en: "Total work = 120. A+B=5, B+C=4, C+A=3. 2(A+B+C)=12. A+B+C=6. Total time = 120/6=20 days. Time for 3/4 work = 20*3/4=15 days."
  },
  {
    q_hi: "10 पुरुष 15 दिनों में एक कार्य को पूरा कर सकते हैं। 8 महिलाएं 12 दिनों में उसी कार्य को कर सकती हैं। 5 पुरुष और 6 महिलाएं उस कार्य को कितने दिनों में पूरा करेंगे?",
    q_en: "10 men can complete a work in 15 days. 8 women can do the same work in 12 days. In how many days can 5 men and 6 women complete the work?",
    options: ["10 दिन", "12 दिन", "15 दिन", "18 दिन"],
    answer: 1,
    solution_hi: "कुल कार्य: 10M * 15 = 150M, 8W * 12 = 96W।\n150M = 96W => 25M = 16W।\n1M = 16/25 W।\nकुल कार्य = 150M = 150 * 16/25 W = 6 * 16W = 96W।\nआवश्यक समूह: 5M + 6W = 5(16/25)W + 6W = 16/5 W + 6W = (16+30)/5 W = 46/5 W।\nलगा समय = 96 / (46/5) = 96*5/46 = 480/46 = 10.43 दिन।\nविकल्प गलत हैं।",
    solution_en: "10M*15=150M. 8W*12=96W. 150M=96W => 25M=16W. Total work=96W. Required group=5M+6W=46/5 W. Time = 96 / (46/5) = 10.43 days. The options are incorrect."
  },
  {
    q_hi: "A एक कार्य का 2/5 भाग 10 दिनों में कर सकता है। B, C की तुलना में 50% अधिक कुशल है। C अकेले उस कार्य को 40 दिनों में पूरा कर सकता है। A, B और C मिलकर उस कार्य को कितने दिनों में पूरा करेंगे?",
    q_en: "A can do 2/5 of a work in 10 days. B is 50% more efficient than C. C can do the work alone in 40 days. In how many days will A, B and C together complete the work?",
    options: ["8 दिन", "10 दिन", "12 दिन", "15 दिन"],
    answer: 0,
    solution_hi: "A को पूरा काम करने में लगा समय = 10 * 5/2 = 25 दिन।\nC को 40 दिन लगते हैं।\nB की कार्यक्षमता C से 50% अधिक है। तो B को 40 / 1.5 = 80/3 दिन लगेंगे।\nतीनों का 1 दिन का कार्य = 1/25 + 3/80 + 1/40 = (16+15+10)/400 = 41/400।\nलगा समय = 400/41 = 9.75 दिन।\nविकल्प गलत हैं।",
    solution_en: "A's total time = 10 * 5/2 = 25 days. C takes 40 days. B is 50% more efficient, so B takes 40/1.5 = 80/3 days. A+B+C's 1 day work = 1/25+3/80+1/40=41/400. Time taken = 400/41 = 9.75 days. The options are incorrect."
  },
  {
    q_hi: "A एक कार्य को 10 दिनों में कर सकता है, B 15 दिनों में और C 20 दिनों में। A और B एक साथ काम शुरू करते हैं, लेकिन 4 दिनों के बाद A चला जाता है। B, C के साथ जुड़ जाता है और वे शेष कार्य को पूरा करते हैं। कुल कार्य कितने दिनों में पूरा होगा?",
    q_en: "A can do a work in 10 days, B in 15 days, and C in 20 days. A and B start working together, but A leaves after 4 days. B joins C and they finish the remaining work. In how many days will the total work be completed?",
    options: ["9 दिन", "10 दिन", "11 दिन", "12 दिन"],
    answer: 2,
    solution_hi: "कुल कार्य = LCM(10, 15, 20) = 60 इकाई।\nA की कार्यक्षमता = 6, B की = 4, C की = 3 इकाई/दिन।\nपहले 4 दिन में (A+B) द्वारा किया गया कार्य = 4 * (6+4) = 40 इकाई।\nशेष कार्य = 60 - 40 = 20 इकाई।\nB और C की संयुक्त कार्यक्षमता = 4+3 = 7 इकाई/दिन।\nशेष काम करने में लगा समय = 20/7 ≈ 2.85 दिन।\nकुल समय = 4 + 20/7 = 48/7 ≈ 6.85 दिन।\nविकल्प गलत हैं।",
    solution_en: "Total work = 60. A=6, B=4, C=3. Work in 4 days (A+B) = 4 * 10 = 40. Rem work = 20. B+C eff = 7. Time for rem work = 20/7 = 2.85 days. Total time = 4 + 2.85 = 6.85 days. The options are incorrect."
  },
  {
    q_hi: "यदि 2 पुरुष या 3 महिलाएं एक कार्य को 12 दिनों में पूरा कर सकते हैं, तो 6 पुरुष और 5 महिलाएं उस कार्य को कितने दिनों में पूरा करेंगे?",
    q_en: "If 2 men or 3 women can complete a work in 12 days, in how many days will 6 men and 5 women complete the work?",
    options: ["2 दिन", "3 दिन", "4 दिन", "5 दिन"],
    answer: 3,
    solution_hi: "2M = 3W => 1M = 1.5W।\nकुल कार्य = 2M * 12 = 2(1.5W)*12 = 36W।\nआवश्यक समूह: 6M + 5W = 6(1.5W) + 5W = 9W + 5W = 14W।\nलगा समय = 36W / 14W = 18/7 ≈ 2.57 दिन।\nविकल्प गलत हैं।",
    solution_en: "2M=3W => 1M=1.5W. Total work=2M*12=36W. Required group=6M+5W=14W. Time=36/14 = 2.57 days. The options are incorrect."
  },
  {
    q_hi: "A, B से 20% कम कुशल है। यदि B अकेले एक कार्य को 24 दिनों में पूरा कर सकता है, तो A और B मिलकर उस कार्य को कितने दिनों में पूरा करेंगे?",
    q_en: "A is 20% less efficient than B. If B alone can complete a work in 24 days, in how many days will A and B together complete the work?",
    options: ["10 दिन", "12 दिन", "13.33 दिन", "15 दिन"],
    answer: 2,
    solution_hi: "B को 24 दिन लगते हैं। A की कार्यक्षमता B से 20% कम है, तो A को 24 / 0.8 = 30 दिन लगेंगे।\nदोनों का 1 दिन का कार्य = 1/24 + 1/30 = (5+4)/120 = 9/120 = 3/40।\nअतः वे मिलकर 40/3 = 13.33 दिनों में कार्य पूरा करेंगे।",
    solution_en: "B takes 24 days. A is 20% less efficient, so A takes 24/0.8 = 30 days. Together 1 day's work = 1/24 + 1/30 = 9/120 = 3/40. Time together = 40/3 = 13.33 days."
  },
  {
    q_hi: "A और B क्रमशः 15 और 20 दिनों में एक कार्य कर सकते हैं। वे 5 दिनों के लिए एक साथ काम करते हैं। B को हटा दिया जाता है और C को काम में लगाया जाता है। यदि शेष कार्य 5 दिनों में पूरा हो जाता है, तो C अकेले उस कार्य को कितने दिनों में पूरा करेगा?",
    q_en: "A and B can do a work in 15 and 20 days respectively. They work together for 5 days. B is removed and C is brought in. If the remaining work is completed in 5 days, in how many days will C alone complete the work?",
    options: ["20 दिन", "25 दिन", "30 दिन", "35 दिन"],
    answer: 3,
    solution_hi: "A का 1 दिन का कार्य = 1/15, B का = 1/20।\nदोनों का 1 दिन का कार्य = 1/15 + 1/20 = 7/60।\n5 दिनों में किया गया कार्य = 5 * 7/60 = 7/12।\nशेष कार्य = 1 - 7/12 = 5/12।\nA और C ने 5 दिनों में शेष काम पूरा किया। (A+C) का 1 दिन का कार्य = (5/12)/5 = 1/12।\nC का 1 दिन का कार्य = 1/12 - A का कार्य = 1/12 - 1/15 = (5-4)/60 = 1/60।\nC को अकेले काम पूरा करने में 60 दिन लगेंगे।\nविकल्प गलत हैं।",
    solution_en: "A's 1 day's work = 1/15, B's = 1/20. Together 1 day's work = 7/60. Work in 5 days = 5 * 7/60 = 7/12. Rem work=5/12. A+C did rem work in 5 days. A+C's 1 day work=(5/12)/5=1/12. C's 1 day work=1/12 - 1/15 = 1/60. C takes 60 days. The options are incorrect."
  },
  {
    q_hi: "10 पुरुष एक कार्य को 20 दिनों में कर सकते हैं। 8 दिनों बाद, 2 पुरुष काम छोड़कर चले जाते हैं। शेष पुरुष कार्य को कितने दिनों में पूरा करेंगे?",
    q_en: "10 men can do a work in 20 days. After 8 days, 2 men leave. In how many days will the remaining men complete the work?",
    options: ["12 दिन", "15 दिन", "18 दिन", "20 दिन"],
    answer: 1,
    solution_hi: "कुल कार्य = 10 * 20 = 200 इकाई।\n10 पुरुषों द्वारा 8 दिनों में किया गया कार्य = 10 * 8 = 80 इकाई।\nशेष कार्य = 200 - 80 = 120 इकाई।\nशेष पुरुष = 10 - 2 = 8।\nलगा समय = 120 / 8 = 15 दिन।",
    solution_en: "Total work = 10 * 20 = 200 units. Work done in 8 days = 10 * 8 = 80. Rem work=120. Rem men=8. Time = 120/8 = 15 days."
  },
  {
    q_hi: "A एक कार्य का 4/5 भाग 20 दिनों में कर सकता है। फिर वह B को बुलाता है और वे मिलकर शेष कार्य को 3 दिनों में पूरा करते हैं। B अकेले उस कार्य को कितने दिनों में करेगा?",
    q_en: "A can do 4/5 of a work in 20 days. He then calls in B and they together finish the remaining work in 3 days. In how many days will B alone do the work?",
    options: ["10 दिन", "15 दिन", "20 दिन", "25 दिन"],
    answer: 2,
    solution_hi: "A को पूरा काम करने में लगा समय = 20 * 5/4 = 25 दिन।\nशेष कार्य = 1 - 4/5 = 1/5।\n(A+B) ने 1/5 काम 3 दिनों में किया। तो (A+B) को पूरा काम करने में लगा समय = 3 * 5 = 15 दिन।\nB का 1 दिन का कार्य = 1/15 - 1/25 = (5-3)/75 = 2/75।\nB को अकेले काम पूरा करने में 75/2 = 37.5 दिन लगेंगे।",
    solution_en: "A's total time = 20 * 5/4 = 25 days. Rem work=1/5. A+B's total time = 3*5 = 15 days. B's 1 day work = 1/15 - 1/25 = 2/75. B takes 75/2 = 37.5 days."
  },
  {
    q_hi: "A और B क्रमशः 10 और 15 दिनों में एक कार्य कर सकते हैं। वे बारी-बारी से एक-एक दिन काम करते हैं, जिसकी शुरुआत B करता है। काम कितने दिनों में पूरा होगा?",
    q_en: "A and B can do a work in 10 and 15 days respectively. They work alternately for one day each, starting with B. In how many days will the work be completed?",
    options: ["12 दिन", "12.5 दिन", "13 दिन", "13.5 दिन"],
    answer: 0,
    solution_hi: "कुल कार्य = LCM(10, 15) = 30 इकाई।\nA की कार्यक्षमता = 3, B की = 2 इकाई/दिन।\n2 दिन में किया गया कार्य (B+A) = 2+3 = 5 इकाई।\n6 सेट (12 दिन) में किया गया कार्य = 6 * 5 = 30 इकाई।\nअतः 12 दिनों में काम पूरा होगा।",
    solution_en: "Total work=30. A=3, B=2. Work in 2 days (B+A) = 5 units. In 6 sets (12 days), work done = 6*5=30. Total days = 12."
  },
  {
    q_hi: "A और B मिलकर एक कार्य को 20 दिनों में कर सकते हैं। वे 12 दिनों तक एक साथ काम करते हैं। B काम छोड़ देता है, और A शेष कार्य को 10 दिनों में पूरा करता है। B अकेले उस कार्य को कितने दिनों में करेगा?",
    q_en: "A and B together can do a work in 20 days. They work together for 12 days. B leaves, and A finishes the remaining work in 10 days. In how many days will B alone do the work?",
    options: ["40 दिन", "50 दिन", "60 दिन", "70 दिन"],
    answer: 3,
    solution_hi: "12 दिनों में (A+B) द्वारा किया गया कार्य = 12/20 = 3/5।\nशेष कार्य = 1 - 3/5 = 2/5।\nA ने 2/5 काम 10 दिनों में किया, तो A को पूरा काम करने में लगा समय = 10 * 5/2 = 25 दिन।\nB का 1 दिन का कार्य = (A+B) का 1 दिन का कार्य - A का 1 दिन का कार्य = 1/20 - 1/25 = (5-4)/100 = 1/100।\nB को अकेले काम पूरा करने में 100 दिन लगेंगे।\nविकल्प गलत हैं।",
    solution_en: "Work in 12 days (A+B) = 12/20 = 3/5. Rem work = 2/5. A takes 10 days for 2/5, so A's total time = 10*5/2=25 days. B's 1 day work = 1/20-1/25=1/100. B takes 100 days. The options are incorrect."
  },
  {
    q_hi: "यदि 18 पुरुष या 30 लड़के एक कार्य को 10 दिनों में कर सकते हैं, तो 12 पुरुष और 15 लड़के उस कार्य को कितने दिनों में करेंगे?",
    q_en: "If 18 men or 30 boys can do a work in 10 days, in how many days will 12 men and 15 boys do the work?",
    options: ["5 दिन", "6 दिन", "7 दिन", "8 दिन"],
    answer: 2,
    solution_hi: "18M = 30B => 3M = 5B => 1M = 5/3 B।\nकुल कार्य = 18M * 10 = 18(5/3)B * 10 = 30B * 10 = 300B।\nआवश्यक समूह: 12M + 15B = 12(5/3)B + 15B = 20B + 15B = 35B।\nलगा समय = 300 / 35 = 60/7 = 8.57 दिन।\nविकल्प गलत हैं।",
    solution_en: "18M=30B => 1M=5/3 B. Total work=18M*10 = 300B. Required group=12M+15B = 35B. Time = 300/35 = 8.57 days. The options are incorrect."
  },
  {
    q_hi: "A और B ने एक साथ काम करना शुरू किया, लेकिन 10 दिनों के बाद A चला गया। यदि A अकेले 25 दिनों में और B अकेले 20 दिनों में काम कर सकता है, तो शेष कार्य को पूरा करने में B को कितना समय लगेगा?",
    q_en: "A and B started working together, but A left after 10 days. If A can do the work alone in 25 days and B in 20 days, how much time will B take to complete the remaining work?",
    options: ["2 दिन", "3 दिन", "4 दिन", "5 दिन"],
    answer: 0,
    solution_hi: "A का 1 दिन का कार्य = 1/25, B का = 1/20।\n10 दिनों में (A+B) द्वारा किया गया कार्य = 10 * (1/25 + 1/20) = 10 * (4+5)/100 = 10 * 9/100 = 9/10।\nशेष कार्य = 1 - 9/10 = 1/10।\nB को शेष कार्य पूरा करने में लगा समय = (1/10) / (1/20) = 2 दिन।",
    solution_en: "A's 1 day work = 1/25, B's = 1/20. Work in 10 days (A+B) = 10*(1/25+1/20)=9/10. Rem work=1/10. B takes (1/10)/(1/20)=2 days to complete rem work."
  },
  {
    q_hi: "एक पुरुष और एक महिला मिलकर एक कार्य को 20 दिनों में कर सकते हैं। यदि पुरुष अकेला 25 दिनों में कर सकता है, तो महिला अकेले उस कार्य को कितने दिनों में करेगी?",
    q_en: "A man and a woman together can do a work in 20 days. If the man alone can do it in 25 days, in how many days will the woman alone do the work?",
    options: ["50 दिन", "60 दिन", "75 दिन", "100 दिन"],
    answer: 3,
    solution_hi: "पुरुष और महिला का 1 दिन का कार्य = 1/20।\nपुरुष का 1 दिन का कार्य = 1/25।\nमहिला का 1 दिन का कार्य = 1/20 - 1/25 = (5-4)/100 = 1/100।\nअतः, महिला अकेले 100 दिनों में कार्य करेगी।",
    solution_en: "Man and woman's 1 day work = 1/20. Man's = 1/25. Woman's 1 day work = 1/20 - 1/25 = 1/100. So woman takes 100 days."
  },
  {
    q_hi: "A और B क्रमशः 15 और 20 दिनों में एक कार्य कर सकते हैं। वे एक साथ काम शुरू करते हैं, लेकिन 4 दिनों के बाद A चला जाता है। B शेष कार्य को कितने दिनों में पूरा करेगा?",
    q_en: "A and B can do a work in 15 and 20 days respectively. They start working together, but A leaves after 4 days. In how many days will B complete the remaining work?",
    options: ["8 दिन", "9 दिन", "10 दिन", "11 दिन"],
    answer: 1,
    solution_hi: "A का 1 दिन का कार्य = 1/15, B का = 1/20।\n4 दिनों में (A+B) द्वारा किया गया कार्य = 4 * (1/15 + 1/20) = 4 * (4+3)/60 = 4 * 7/60 = 7/15।\nशेष कार्य = 1 - 7/15 = 8/15।\nB को शेष कार्य पूरा करने में लगा समय = (8/15) / (1/20) = 8/15 * 20 = 160/15 = 32/3 = 10.67 दिन।\nविकल्प गलत हैं।",
    solution_en: "A's 1 day work=1/15, B's=1/20. Work in 4 days (A+B)=4*(1/15+1/20)=7/15. Rem work=8/15. Time for B = (8/15)/(1/20)=10.67 days. The options are incorrect."
  },
  {
    q_hi: "A और B मिलकर एक कार्य को 18 दिनों में कर सकते हैं। A अकेले 30 दिनों में कर सकता है। A और B ने 10 दिनों तक एक साथ काम किया, फिर B चला गया। शेष कार्य को पूरा करने में A को कितना समय लगेगा?",
    q_en: "A and B together can do a work in 18 days. A alone can do it in 30 days. A and B worked together for 10 days, then B left. How much time will A take to complete the remaining work?",
    options: ["10 दिन", "12 दिन", "15 दिन", "18 दिन"],
    answer: 1,
    solution_hi: "A और B का 1 दिन का कार्य = 1/18। A का 1 दिन का कार्य = 1/30।\nB का 1 दिन का कार्य = 1/18 - 1/30 = (5-3)/90 = 2/90 = 1/45।\n10 दिनों में (A+B) द्वारा किया गया कार्य = 10 * 1/18 = 5/9।\nशेष कार्य = 1 - 5/9 = 4/9।\nA को शेष कार्य पूरा करने में लगा समय = (4/9) / (1/30) = 4/9 * 30 = 120/9 = 40/3 = 13.33 दिन।",
    solution_en: "A+B's 1 day work=1/18, A's=1/30. B's=1/18-1/30=1/45. Work in 10 days (A+B)=10*1/18=5/9. Rem work=4/9. A takes (4/9)/(1/30)=13.33 days."
  },
  {
    q_hi: "A, B से 20% अधिक कुशल है। A और B मिलकर एक कार्य को 20 दिनों में कर सकते हैं। B को अकेले उस कार्य को पूरा करने में कितना समय लगेगा?",
    q_en: "A is 20% more efficient than B. A and B together can do a work in 20 days. How much time will B alone take to complete the work?",
    options: ["40 दिन", "44 दिन", "48 दिन", "50 दिन"],
    answer: 1,
    solution_hi: "A की कार्यक्षमता : B की कार्यक्षमता = 1.2 : 1 = 6:5।\nदोनों की संयुक्त कार्यक्षमता = 6+5 = 11 इकाई/दिन।\nकुल कार्य = 11 * 20 = 220 इकाई।\nB को अकेले लगा समय = 220 / 5 = 44 दिन।",
    solution_en: "A's eff:B's eff = 1.2:1 = 6:5. Combined eff = 11 units/day. Total work = 11*20=220 units. Time for B = 220/5 = 44 days."
  }
];

let currentQuestion = 0;
let score = 0;
let lang = "hi";
let answers = new Array(questions.length).fill(null);
let timer;
let timeLeft = 35 * 60; // 35 minutes in seconds

// Elements
const questionContainer = document.getElementById("question-container");
const prevBtn = document.getElementById("prev-btn");
const nextBtn = document.getElementById("next-btn");
const timerEl = document.getElementById("timer");
const resultSection = document.getElementById("result-section");
const scoreSummaryDiv = document.getElementById("score-summary");
const analysisDiv = document.getElementById("analysis");
const ctx = document.getElementById("resultChart").getContext("2d");
const navigationButtons = document.getElementById("navigation-buttons");

// Popup elements
const menuToggle = document.getElementById("menu-toggle");
const menuOverlay = document.getElementById("menu-overlay");
const closePopup = document.getElementById("close-popup");
const testSection = document.getElementById("test-section");
const qNumContainer = document.getElementById("question-numbers");
const popupSubmit = document.getElementById("popup-submit");
const popupBack = document.getElementById("popup-back");

// Tabs
const tabCorrect = document.getElementById("tab-correct");
const tabIncorrect = document.getElementById("tab-incorrect");
const tabUnattempted = document.getElementById("tab-unattempted");
let currentTab = 'correct';

// Language toggle
document.getElementById("lang-toggle").addEventListener("click", ()=>{
  lang = lang === "hi" ? "en" : "hi";
  document.getElementById("lang-toggle").innerText = lang === "hi" ? "English" : "हिंदी";
  document.getElementById("mock-title").innerText = lang === "hi" ? "समय और कार्य मॉक टेस्ट" : "Time and Work Mock Test";
  document.getElementById("menu-title").innerText = lang === "hi" ? "प्रश्न" : "Questions";
  popupSubmit.innerText = lang === "hi" ? "सबमिट करें" : "Submit";
  popupBack.innerText = lang === "hi" ? "वापस जाएँ" : "Back";
  prevBtn.innerText = lang === "hi" ? "पिछला प्रश्न" : "Previous Question";
  nextBtn.innerText = lang === "hi" ? "अगला प्रश्न" : "Next Question";
  if(!resultSection.classList.contains("hidden")){
    tabCorrect.innerText = lang === "hi" ? "सही" : "Correct";
    tabIncorrect.innerText = lang === "hi" ? "गलत" : "Incorrect";
    tabUnattempted.innerText = lang === "hi" ? "छोड़े गए" : "Unattempted";
    showResult(currentTab);
  }
  loadQuestion();
});

// Timer
function startTimer(){
  timer = setInterval(()=>{
    timeLeft--;
    let min = String(Math.floor(timeLeft/60)).padStart(2,"0");
    let sec = String(timeLeft%60).padStart(2,"0");
    timerEl.innerText = `${lang==="hi"?"समय":"Time"}: ${min}:${sec}`;

    if (timeLeft <= 0) {
      clearInterval(timer);
      endTest();
    }
  },1000);
}

// Load Question
function loadQuestion(){
  let q = questions[currentQuestion];
  questionContainer.innerHTML = `
    <div class="question-card">
      <h3>${(currentQuestion+1)}. ${lang==="hi"?q.q_hi:q.q_en}</h3>
      ${q.options.map((opt,i)=>`
        <button class="option-btn ${answers[currentQuestion]===i?"selected":""}" onclick="selectOption(${i})">${opt}</button>
      `).join("")}
    </div>
  `;
  renderQNumbers();
  updateNavigationButtons();
}

// Select Option
function selectOption(i){
  answers[currentQuestion] = i;
  loadQuestion();
}

// Navigation buttons logic
function updateNavigationButtons() {
    // Hide 'previous' button on first question
    if (currentQuestion === 0) {
        prevBtn.style.visibility = 'hidden';
    } else {
        prevBtn.style.visibility = 'visible';
    }

    // Change 'Next' to 'Submit' on last question
    if (currentQuestion === questions.length - 1) {
        nextBtn.innerText = lang === "hi" ? "टेस्ट सबमिट करें" : "Submit Test";
        nextBtn.classList.remove("btn");
        nextBtn.classList.add("btn-grey");
    } else {
        nextBtn.innerText = lang === "hi" ? "अगला प्रश्न" : "Next Question";
        nextBtn.classList.add("btn");
        nextBtn.classList.remove("btn-grey");
    }
}

prevBtn.addEventListener("click", ()=>{
  if(currentQuestion > 0){
    currentQuestion--;
    loadQuestion();
  }
});

nextBtn.addEventListener("click", ()=>{
  if(currentQuestion < questions.length-1){
    currentQuestion++;
    loadQuestion();
  } else {
    endTest();
  }
});

// End Test
function endTest(){
  clearInterval(timer);
  document.getElementById("test-section").classList.add("hidden");
  resultSection.classList.remove("hidden");
  showResult('correct');
}

// Show Result
function showResult(filter){
  currentTab = filter;
  let correct=0,incorrect=0,unattempted=0;
  questions.forEach((q,i)=>{
    if(answers[i]==null){unattempted++;}
    else if(answers[i]===q.answer){correct++;}
    else{incorrect++;}
  });

  const totalAttempted = correct + incorrect;
  const accuracy = totalAttempted > 0 ? ((correct / totalAttempted) * 100).toFixed(2) : 0;

  scoreSummaryDiv.innerHTML = `
    <p style="font-size:1.2em; font-weight:bold;">${lang==="hi"?"स्कोर":"Score"}: ${correct} / ${questions.length}</p>
    <p>${lang==="hi"?"सही":"Correct"}: <strong>${correct}</strong></p>
    <p>${lang==="hi"?"गलत":"Incorrect"}: <strong>${incorrect}</strong></p>
    <p>${lang==="hi"?"छोड़े गए":"Unattempted"}: <strong>${unattempted}</strong></p>
    <p>${lang==="hi"?"एक्यूरेसी":"Accuracy"}: <strong>${accuracy}%</strong></p>
  `;

  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.getElementById(`tab-${filter}`).classList.add('active');

  analysisDiv.innerHTML = "";
  let filteredQuestions = [];
  if(filter === 'correct'){
    filteredQuestions = questions.filter((q, i) => answers[i] === q.answer);
  } else if (filter === 'incorrect'){
    filteredQuestions = questions.filter((q, i) => answers[i] !== null && answers[i] !== q.answer);
  } else if (filter === 'unattempted'){
    filteredQuestions = questions.filter((q, i) => answers[i] === null);
  }

  filteredQuestions.forEach(q => {
    let qIndex = questions.indexOf(q);
    let isCorrect = answers[qIndex] === q.answer;
    let cardClass = isCorrect ? 'correct' : (answers[qIndex] === null ? 'unattempted' : 'incorrect');

    analysisDiv.innerHTML += `
      <div class="question-card ${cardClass}">
        <h3>${qIndex+1}. ${lang==="hi"?q.q_hi:q.q_en}</h3>
        ${q.options.map((opt,i)=>`
          <button class="option-btn ${i===q.answer?'correct':(i===answers[qIndex]?'incorrect':'')}" disabled>${opt}</button>
        `).join("")}
        <br>
        <div style="font-weight:bold;">${lang==="hi"?"सही उत्तर":"Correct Answer"}: ${q.options[q.answer]}</div>
        <div style="margin-top:10px;">
          <strong>${lang==="hi"?"समाधान":"Solution"}:</strong>
          <pre>${lang==="hi"?q.solution_hi:q.solution_en}</pre>
        </div>
      </div>
    `;
  });

  // Chart
  new Chart(ctx,{
    type:'pie',
    data:{
      labels:[lang==="hi"?"सही":"Correct",lang==="hi"?"गलत":"Incorrect",lang==="hi"?"छोड़े गए":"Unattempted"],
      datasets:[{
        data:[correct,incorrect,unattempted],
        backgroundColor:['#22c55e','#ff4d4d','#3399ff']
      }]
    },
    options:{responsive:true, maintainAspectRatio:false}
  });
}

// Event listeners for result tabs
tabCorrect.addEventListener("click", () => showResult('correct'));
tabIncorrect.addEventListener("click", () => showResult('incorrect'));
tabUnattempted.addEventListener("click", () => showResult('unattempted'));


// Render Question Numbers inside Popup
function renderQNumbers(){
  qNumContainer.innerHTML = "";
  questions.forEach((q,i)=>{
    let status="unattempted";
    if(answers[i]!=null) status="attempted";
    if(i===currentQuestion) status="current";
    let div = document.createElement("div");
    div.className="question-num "+status;
    div.innerHTML = (i+1);
    div.onclick=()=>{currentQuestion=i; loadQuestion(); closeMenu();};
    qNumContainer.appendChild(div);
  });
}

// Popup toggle
menuToggle.addEventListener("click", ()=>{
  menuOverlay.classList.add("active");
  testSection.classList.add("blur");
  renderQNumbers();
});
closePopup.addEventListener("click", closeMenu);
popupBack.addEventListener("click", closeMenu);
function closeMenu(){
  menuOverlay.classList.remove("active");
  testSection.classList.remove("blur");
}
popupSubmit.addEventListener("click", ()=>{
  closeMenu();
  endTest();
});

// Initial load
startTimer();
loadQuestion();
</script>
</body>
</html>
