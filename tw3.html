<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>मॉक टेस्ट - बहुभाषी</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; }
.container { max-width:700px; margin:auto; padding:20px; }
.card { background:#fff; padding:20px; margin-bottom:15px; border-radius:12px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
button { padding:10px 15px; margin:5px; border:none; border-radius:6px; cursor:pointer; transition:0.2s; }
button:hover{transform:scale(1.05);}
.btn{background:linear-gradient(90deg,#007bff,#00aaff); color:white;}
.btn-grey{background:linear-gradient(90deg,#666,#999); color:white;}
.hidden{display:none;}
.timer{font-size:18px;font-weight:bold;color:#fff;background:linear-gradient(90deg,#ff4b2b,#ff416c);padding:5px 10px;border-radius:8px;display:inline-block;margin-bottom:15px;}
.tabs{display:flex;justify-content:space-around;margin:15px 0;}
.tab{flex:1;text-align:center;padding:10px;border-radius:8px;cursor:pointer;font-weight:bold;transition:0.2s;}
.tab.correct{background:linear-gradient(90deg,#b9fbc0,#22c55e);}
.tab.incorrect{background:linear-gradient(90deg,#ffb3b3,#ff4d4d);}
.tab.unattempted{background:linear-gradient(90deg,#cce5ff,#3399ff);}
.tab.active{border:2px solid #333;}
.question-card{margin-bottom:15px;border:1px solid #ddd;border-radius:10px;padding:15px;background:#fff;}
.question-card.correct{border-color:green;}
.question-card.incorrect{border-color:red;}
.question-card.unattempted{border-color:#00bfff;}
.mock-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:bold;font-size:20px;}
.question-num{position:relative;width:35px;height:35px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;font-weight:bold;transition:0.2s;color:white;}
.question-num.unattempted{background-color: white; border: 1px solid black; color: black;}
.question-num.attempted{background-color: blue;}
.question-num.current{background-color: red;}
.question-num:hover{transform:scale(1.2);border:2px solid #333;}
.question-num .tooltip{visibility:hidden;background:#333;color:#fff;text-align:left;padding:5px 8px;border-radius:5px;position:absolute;top:-40px;left:50%;transform:translateX(-50%);z-index:10;white-space:nowrap;font-size:12px;}
.question-num:hover .tooltip{visibility:visible;}
#menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:flex-end;align-items:stretch;opacity:0;pointer-events:none;z-index:1000;transition:0.3s;}
#menu-overlay.active{opacity:1;pointer-events:auto;background:rgba(0,0,0,0.3);}
#menu-popup{background:#fff;width:250px;height:100%;padding:20px;box-shadow:-3px 0 10px rgba(0,0,0,0.2);display:flex;flex-direction:column;justify-content:flex-start;transform:translateX(100%);transition:0.3s;}
#menu-overlay.active #menu-popup{transform:translateX(0);}
#question-numbers{display:flex;flex-wrap:wrap;gap:5px;margin-bottom:10px;overflow-y:auto;flex-grow:1;}
#popup-submit,#popup-back{margin-top:10px;padding:10px;}
#test-section.blur{filter:blur(5px);transition:0.3s;}
#lang-toggle{cursor:pointer;font-size:16px;padding:5px 10px;border-radius:6px;border:1px solid #ccc;background:#f0f0f0;}
@media(max-width:500px){#menu-popup{width:80%;}.question-num{width:30px;height:30px;font-size:14px;}button{font-size:14px;padding:8px 10px;}}
.option-btn {
    display: block;
    width: 100%;
    text-align: left;
    padding: 12px 15px;
    margin-bottom: 10px;
    background-color: #f0f0f0;
    border: 1px solid #ddd;
    color: #333;
    font-size: 16px;
    border-radius: 8px;
    transition: background-color 0.2s, border-color 0.2s;
}
.option-btn:hover {
    background-color: #e0e0e0;
}
.option-btn.selected {
    background-color: #28a745;
    color: white;
    border-color: #28a745;
}
</style>
</head>
<body>
<div class="container">
<div class="mock-header card">
  <div>मॉक टेस्ट</div>
  <div style="display:flex;align-items:center;">
    <button id="lang-toggle" class="btn-grey">English</button>
    <div id="menu-toggle" style="margin-left: 10px;">&#8942;</div>
  </div>
</div>

<div id="menu-overlay">
  <div id="menu-popup">
    <h3 id="menu-title">प्रश्न</h3>
    <div id="question-numbers"></div>
    <button id="popup-submit" class="btn">सबमिट करें</button>
    <button id="popup-back" class="btn-grey">वापस जाएँ</button>
  </div>
</div>

<div id="test-section" class="card">
  <div class="timer">⏳ <span id="timer-text">बचा हुआ समय:</span> <span id="timer">25:00</span></div>
  <h2 id="question-text">प्रश्न लोड हो रहा है...</h2>
  <div id="options"></div>
  <div style="margin-top:10px;">
    <button id="prev-btn" class="btn-grey">पिछला</button>
    <button id="next-btn" class="btn">अगला</button>
    <button id="submit-btn" class="btn hidden">सबमिट करें</button>
  </div>
</div>

<div id="result-section" class="hidden">
  <div class="card">
    <h2 id="analysis-title">विश्लेषण</h2>
    <p><b id="score-label">स्कोर:</b> <span id="score"></span></p>
    <p><b id="correct-label">सही:</b> <span id="correct"></span></p>
    <p><b id="incorrect-label">गलत:</b> <span id="incorrect"></span></p>
    <p><b id="unattempted-label">प्रयास नहीं किया गया:</b> <span id="unattempted"></span></p>
    <p><b id="accuracy-label">सटीकता:</b> <span id="accuracy"></span>%</p>
    <p><b id="time-taken-label">लिया गया समय:</b> <span id="time-taken"></span></p>
  </div>
  <div class="card"><canvas id="resultChart"></canvas></div>
  <div class="card">
    <h2 id="solutions-title">समाधान</h2>
    <div class="tabs">
      <div class="tab correct active" data-type="correct" id="tab-correct">सही</div>
      <div class="tab incorrect" data-type="incorrect" id="tab-incorrect">गलत</div>
      <div class="tab unattempted" data-type="unattempted" id="tab-unattempted">प्रयास नहीं किया गया</div>
    </div>
    <div id="solution-list"></div>
  </div>
</div>
</div>

<script>
const questionsData = {
  'hi': [
    {q:"भारत का राष्ट्रीय गान किसने लिखा था?",options:["रबीन्द्रनाथ टैगोर","महात्मा गांधी","बंकिम चंद्र चटर्जी","सुभाष चंद्र बोस"],correct:0,solution:"रबीन्द्रनाथ टैगोर ने 'जन गण मन' लिखा, जो भारत का राष्ट्रीय गान है।"},
    {q:"किस ग्रह को लाल ग्रह के नाम से जाना जाता है?",options:["मंगल","शुक्र","बृहस्पति","शनि"],correct:0,solution:"मंगल ग्रह को आयरन ऑक्साइड के कारण लाल ग्रह कहा जाता है।"},
    {q:"सौरमंडल का सबसे बड़ा ग्रह कौन सा है?",options:["पृथ्वी","मंगल","बृहस्पति","शुक्र"],correct:2,solution:"बृहस्पति सौरमंडल का सबसे बड़ा ग्रह है।"},
    {q:"जापान की राजधानी क्या है?",options:["बीजिंग","टोक्यो","सियोल","बैंकॉक"],correct:1,solution:"टोक्यो जापान की राजधानी है।"},
    {q:"सबसे बड़ा महासागर कौन सा है?",options:["अटलांटिक महासागर","हिंद महासागर","आर्कटिक महासागर","प्रशांत महासागर"],correct:3,solution:"प्रशांत महासागर दुनिया के पाँच महासागरों में सबसे बड़ा और गहरा है।"},
    {q:"भारत में 'राष्ट्रपिता' के रूप में किसे जाना जाता है?",options:["जवाहरलाल नेहरू","सुभाष चंद्र बोस","सरदार पटेल","महात्मा गांधी"],correct:3,solution:"महात्मा गांधी को भारत में 'राष्ट्रपिता' के रूप में जाना जाता है।"},
    {q:"सोने का रासायनिक प्रतीक क्या है?",options:["Au","Ag","Fe","Pb"],correct:0,solution:"सोने का रासायनिक प्रतीक 'Au' है, जो लैटिन शब्द 'aurum' से आया है।"},
    {q:"दुनिया की सबसे लंबी नदी कौन सी है?",options:["अमेज़न नदी","नील नदी","यांग्त्ज़ी नदी","मिसिसिपी नदी"],correct:1,solution:"नील नदी को आमतौर पर दुनिया की सबसे लंबी नदी माना जाता है।"},
    {q:"'स्टैच्यू ऑफ लिबर्टी' किस देश ने USA को उपहार में दिया था?",options:["जर्मनी","फ्रांस","यूनाइटेड किंगडम","स्पेन"],correct:1,solution:"स्टैच्यू ऑफ लिबर्टी फ्रांस द्वारा संयुक्त राज्य अमेरिका को दिया गया एक उपहार था।"},
    {q:"144 का वर्गमूल क्या है?",options:["10","12","14","16"],correct:1,solution:"144 का वर्गमूल 12 है।"},
    {q:"किस जानवर को 'रेगिस्तान का जहाज' कहा जाता है?",options:["ऊँट","गधा","बकरी","घोड़ा"],correct:0,solution:"ऊँट को 'रेगिस्तान का जहाज' कहा जाता है क्योंकि यह रेगिस्तान की कठोर परिस्थितियों में जीवित रह सकता है।"},
    {q:"सूर्य का मुख्य घटक क्या है?",options:["ऑक्सीजन","हाइड्रोजन","हीलियम","नाइट्रोजन"],correct:1,solution:"सूर्य मुख्य रूप से हाइड्रोजन (लगभग 74%) और हीलियम (लगभग 24%) से बना है।"},
    {q:"किस देश को 'उगते सूरज की भूमि' के रूप में जाना जाता है?",options:["चीन","जापान","ऑस्ट्रेलिया","थाईलैंड"],correct:1,solution:"जापान को 'उगते सूरज की भूमि' के रूप में जाना जाता है क्योंकि यह पूर्व में स्थित है।"},
    {q:"'मोना लिसा' किसने चित्रित की थी?",options:["विन्सेंट वैन गोघ","पाब्लो पिकासो","लियोनार्डो दा विंची","क्लाउड मोनेट"],correct:2,solution:"लियोनार्डो दा विंची ने 'मोना लिसा' को चित्रित किया था।"},
    {q:"क्षेत्रफल के अनुसार दुनिया का सबसे बड़ा देश कौन सा है?",options:["अमेरिका","चीन","रूस","कनाडा"],correct:2,solution:"रूस क्षेत्रफल के हिसाब से दुनिया का सबसे बड़ा देश है।"},
    {q:"सबसे छोटा महाद्वीप कौन सा है?",options:["एशिया","यूरोप","ऑस्ट्रेलिया","अफ्रीका"],correct:2,solution:"ऑस्ट्रेलिया क्षेत्रफल के हिसाब से सबसे छोटा महाद्वीप है।"},
    {q:"ऑस्ट्रेलिया की राजधानी क्या है?",options:["सिडनी","मेलबर्न","कैनबरा","पर्थ"],correct:2,solution:"ऑस्ट्रेलिया की राजधानी कैनबरा है।"},
    {q:"एक लीप वर्ष में कितने दिन होते हैं?",options:["365","366","367","364"],correct:1,solution:"एक लीप वर्ष में 366 दिन होते हैं, जिसमें फरवरी में एक अतिरिक्त दिन होता है।"},
    {q:"यूनाइटेड किंगडम की मुद्रा क्या है?",options:["यूरो","डॉलर","पाउंड स्टर्लिंग","येन"],correct:2,solution:"यूनाइटेड किंगडम की मुद्रा पाउंड स्टर्लिंग है।"},
    {q:"कौन सा पक्षी पीछे की ओर उड़ सकता है?",options:["कौआ","हमिंगबर्ड","गौरैया","चील"],correct:1,solution:"हमिंगबर्ड एकमात्र ऐसा पक्षी है जो पीछे की ओर उड़ सकता है।"}
  ],
  'en': [
    {q:"Who wrote the National Anthem of India?",options:["Rabindranath Tagore","Mahatma Gandhi","Bankim Chandra Chatterjee","Subhash Chandra Bose"],correct:0,solution:"Rabindranath Tagore wrote 'Jana Gana Mana', the national anthem of India."},
    {q:"Which planet is known as the Red Planet?",options:["Mars","Venus","Jupiter","Saturn"],correct:0,solution:"Mars is called the Red Planet due to its reddish appearance caused by iron oxide."},
    {q:"Largest planet in Solar System?",options:["Earth","Mars","Jupiter","Venus"],correct:2,solution:"Jupiter is the largest planet in the Solar System."},
    {q:"What is the capital of Japan?",options:["Beijing","Tokyo","Seoul","Bangkok"],correct:1,solution:"Tokyo is the capital of Japan."},
    {q:"Which ocean is the largest?",options:["Atlantic Ocean","Indian Ocean","Arctic Ocean","Pacific Ocean"],correct:3,solution:"The Pacific Ocean is the largest and deepest of the world's five oceans."},
    {q:"Who is known as the 'Father of the Nation' in India?",options:["Jawaharlal Nehru","Subhash Chandra Bose","Sardar Patel","Mahatma Gandhi"],correct:3,solution:"Mahatma Gandhi is widely known as the 'Father of the Nation' in India."},
    {q:"What is the chemical symbol for gold?",options:["Au","Ag","Fe","Pb"],correct:0,solution:"The chemical symbol for gold is Au, from the Latin word 'aurum'."},
    {q:"Which is the longest river in the world?",options:["Amazon River","Nile River","Yangtze River","Mississippi River"],correct:1,solution:"The Nile River in Africa is generally considered the longest river in the world."},
    {q:"The 'Statue of Liberty' was a gift to the USA from which country?",options:["Germany","France","United Kingdom","Spain"],correct:1,solution:"The Statue of Liberty was a gift from France to the United States."},
    {q:"What is the square root of 144?",options:["10","12","14","16"],correct:1,solution:"The square root of 144 is 12."},
    {q:"Which animal is known as the 'Ship of the Desert'?",options:["Camel","Donkey","Goat","Horse"],correct:0,solution:"A camel is known as the 'Ship of the Desert' because of its ability to survive in harsh desert conditions."},
    {q:"What is the main component of the sun?",options:["Oxygen","Hydrogen","Helium","Nitrogen"],correct:1,solution:"The sun is primarily composed of hydrogen (about 74%) and helium (about 24%)."},
    {q:"Which country is known as the 'Land of the Rising Sun'?",options:["China","Japan","Australia","Thailand"],correct:1,solution:"Japan is known as the 'Land of the Rising Sun' due to its location in the east."},
    {q:"Who painted the 'Mona Lisa'?",options:["Vincent van Gogh","Pablo Picasso","Leonardo da Vinci","Claude Monet"],correct:2,solution:"Leonardo da Vinci painted the 'Mona Lisa'."},
    {q:"What is the largest country in the world by area?",options:["USA","China","Russia","Canada"],correct:2,solution:"Russia is the largest country in the world by land area."},
    {q:"Which is the smallest continent?",options:["Asia","Europe","Australia","Africa"],correct:2,solution:"Australia is the smallest continent by land area."},
    {q:"What is the capital of Australia?",options:["Sydney","Melbourne","Canberra","Perth"],correct:2,solution:"The capital of Australia is Canberra."},
    {q:"How many days are in a leap year?",options:["365","366","367","364"],correct:1,solution:"A leap year has 366 days, with an extra day added to February."},
    {q:"What is the currency of the United Kingdom?",options:["Euro","Dollar","Pound Sterling","Yen"],correct:2,solution:"The currency of the United Kingdom is the Pound Sterling."},
    {q:"Which bird can fly backward?",options:["Crow","Hummingbird","Sparrow","Eagle"],correct:1,solution:"The hummingbird is the only bird known to be able to fly backward."}
  ]
};

let currentQ = 0, totalTime = 25 * 60, timeLeft = totalTime, timerInterval;
let currentLang = 'hi';
let questions = questionsData[currentLang];
let userAnswers = new Array(questionsData['hi'].length).fill(null);
let isMarked = new Array(questionsData['hi'].length).fill(false);

const langToggle = document.getElementById("lang-toggle");
const qText = document.getElementById("question-text");
const optionsDiv = document.getElementById("options");
const prevBtn = document.getElementById("prev-btn");
const nextBtn = document.getElementById("next-btn");
const submitBtn = document.getElementById("submit-btn");
const timerDisplay = document.getElementById("timer");
const menuToggle = document.getElementById("menu-toggle");
const menuOverlay = document.getElementById("menu-overlay");
const questionNumbersDiv = document.getElementById("question-numbers");
const popupSubmit = document.getElementById("popup-submit");
const popupBack = document.getElementById("popup-back");

const translations = {
    'hi': {
        'mockTestTitle': 'मॉक टेस्ट',
        'timeLeft': 'बचा हुआ समय:',
        'prevBtn': 'पिछला',
        'nextBtn': 'अगला',
        'submitBtn': 'सबमिट करें',
        'menuTitle': 'प्रश्न',
        'popupSubmit': 'सबमिट करें',
        'popupBack': 'वापस जाएँ',
        'analysisTitle': 'विश्लेषण',
        'scoreLabel': 'स्कोर:',
        'correctLabel': 'सही:',
        'incorrectLabel': 'गलत:',
        'unattemptedLabel': 'प्रयास नहीं किया गया:',
        'accuracyLabel': 'सटीकता:',
        'timeTakenLabel': 'लिया गया समय:',
        'solutionsTitle': 'समाधान',
        'tabCorrect': 'सही',
        'tabIncorrect': 'गलत',
        'tabUnattempted': 'प्रयास नहीं किया गया',
        'solutionText': 'समाधान:',
        'questionPrefix': 'प्र'
    },
    'en': {
        'mockTestTitle': 'Mock Test',
        'timeLeft': 'Time Left:',
        'prevBtn': 'Previous',
        'nextBtn': 'Next',
        'submitBtn': 'Submit',
        'menuTitle': 'Questions',
        'popupSubmit': 'Submit',
        'popupBack': 'Back',
        'analysisTitle': 'Analysis',
        'scoreLabel': 'Score:',
        'correctLabel': 'Correct:',
        'incorrectLabel': 'Incorrect:',
        'unattemptedLabel': 'Unattempted:',
        'accuracyLabel': 'Accuracy:',
        'timeTakenLabel': 'Time Taken:',
        'solutionsTitle': 'Solutions',
        'tabCorrect': 'Correct',
        'tabIncorrect': 'Incorrect',
        'tabUnattempted': 'Unattempted',
        'solutionText': 'Solution:',
        'questionPrefix': 'Q'
    }
};

function updateUI(lang) {
    const t = translations[lang];
    document.querySelector('.mock-header div').innerText = t.mockTestTitle;
    document.getElementById('timer-text').innerText = t.timeLeft;
    prevBtn.innerText = t.prevBtn;
    nextBtn.innerText = t.nextBtn;
    submitBtn.innerText = t.submitBtn;
    document.getElementById('menu-title').innerText = t.menuTitle;
    popupSubmit.innerText = t.popupSubmit;
    popupBack.innerText = t.popupBack;
    document.getElementById('analysis-title').innerText = t.analysisTitle;
    document.getElementById('score-label').innerText = t.scoreLabel;
    document.getElementById('correct-label').innerText = t.correctLabel;
    document.getElementById('incorrect-label').innerText = t.incorrectLabel;
    document.getElementById('unattempted-label').innerText = t.unattemptedLabel;
    document.getElementById('accuracy-label').innerText = t.accuracyLabel;
    document.getElementById('time-taken-label').innerText = t.timeTakenLabel;
    document.getElementById('solutions-title').innerText = t.solutionsTitle;
    document.getElementById('tab-correct').innerText = t.tabCorrect;
    document.getElementById('tab-incorrect').innerText = t.tabIncorrect;
    document.getElementById('tab-unattempted').innerText = t.tabUnattempted;
    langToggle.innerText = lang === 'hi' ? 'English' : 'हिंदी';
}

langToggle.addEventListener('click', () => {
    currentLang = currentLang === 'hi' ? 'en' : 'hi';
    questions = questionsData[currentLang];
    updateUI(currentLang);
    loadQuestion();
    renderQuestionNumbers();
});

function loadQuestion(){
  const qData = questions[currentQ];
  const qPrefix = translations[currentLang]['questionPrefix'];
  qText.innerText=`${qPrefix}${currentQ+1}. ${qData.q}`;
  optionsDiv.innerHTML="";
  qData.options.forEach((opt,i)=>{
    let btn=document.createElement("button");
    btn.innerText=opt;
    btn.className="option-btn";
    if(userAnswers[currentQ]===i) btn.classList.add("selected");
    btn.onclick=()=>{
      userAnswers[currentQ]=i;
      isMarked[currentQ]=true;
      loadQuestion();
    };
    optionsDiv.appendChild(btn);
  });
  prevBtn.style.display=currentQ===0?"none":"inline-block";
  nextBtn.style.display=currentQ===questions.length-1?"none":"inline-block";
  submitBtn.classList.toggle("hidden",currentQ!==questions.length-1);
  renderQuestionNumbers();
}

function renderQuestionNumbers(){
  questionNumbersDiv.innerHTML="";
  const totalQuestions = questionsData['hi'].length;
  for (let i = 0; i < totalQuestions; i++) {
    const q = questions[i];
    let span=document.createElement("div");
    span.className="question-num";
    if (i === currentQ) {
        span.classList.add("current");
    } else if (userAnswers[i] !== null) {
        span.classList.add("attempted");
    } else {
        span.classList.add("unattempted");
    }

    span.innerText=i+1;
    let tooltip=document.createElement("span");
    tooltip.className="tooltip";
    tooltip.innerText=q.solution;
    span.appendChild(tooltip);
    span.onclick=()=>{
      currentQ=i;
      loadQuestion();
      menuOverlay.classList.remove("active");
      document.getElementById("test-section").classList.remove("blur");
    };
    questionNumbersDiv.appendChild(span);
  }
}

function startTimer(){
  timerInterval=setInterval(()=>{
    timeLeft--;
    let minutes=Math.floor(timeLeft/60);
    let seconds=timeLeft%60;
    timerDisplay.innerText=`${minutes}:${seconds<10?"0":""}${seconds}`;
    if(timeLeft<=0){ clearInterval(timerInterval); showResult(); }
  },1000);
}

function showResult(){
  clearInterval(timerInterval);
  document.getElementById("test-section").classList.add("hidden");
  document.getElementById("result-section").classList.remove("hidden");

  let correct=0,incorrect=0,unattempted=0;
  for (let i = 0; i < questionsData['hi'].length; i++) {
    const correctAns = questionsData['hi'][i].correct;
    if(userAnswers[i]===null) unattempted++;
    else if(userAnswers[i]===correctAns) correct++;
    else incorrect++;
  }

  let totalQuestions=questionsData['hi'].length;
  let scoreFraction=`${correct}/${totalQuestions}`;
  let accuracy=(correct/(correct+incorrect))*100||0;
  let timeTaken=totalTime-timeLeft;
  let minutes=Math.floor(timeTaken/60);
  let seconds=timeTaken%60;
  const t = translations[currentLang];

  document.getElementById("score").innerText=scoreFraction;
  document.getElementById("correct").innerText=correct;
  document.getElementById("incorrect").innerText=incorrect;
  document.getElementById("unattempted").innerText=unattempted;
  document.getElementById("accuracy").innerText=accuracy.toFixed(1);
  document.getElementById("time-taken").innerText=`${minutes}m ${seconds}s`;

  new Chart(document.getElementById("resultChart"),{
    type:"doughnut",
    data:{labels:[t.tabCorrect,t.tabIncorrect,t.tabUnattempted],datasets:[{data:[correct,incorrect,unattempted],backgroundColor:["green","red","#00bfff"]}]}
  });

  const solutionList=document.getElementById("solution-list");
  solutionList.innerHTML="";
  for (let i = 0; i < questionsData['hi'].length; i++) {
    const qHindi = questionsData['hi'][i];
    const qEng = questionsData['en'][i];
    
    let q;
    if (currentLang === 'hi') {
        q = qHindi;
    } else {
        q = qEng;
    }

    let div=document.createElement("div");
    div.className="question-card";
    if(userAnswers[i]===null) div.classList.add("unattempted");
    else if(userAnswers[i]===qHindi.correct) div.classList.add("correct");
    else div.classList.add("incorrect");

    div.innerHTML=`<b>${t.questionPrefix}${i+1}. ${q.q}</b>`;
    q.options.forEach((opt,j)=>{
      let mark="";
      if(j===q.correct) mark=" ✅";
      if(j===userAnswers[i] && j!==q.correct) mark=" ❌";
      div.innerHTML+=`<p>${j+1}. ${opt}${mark}</p>`;
    });
    div.innerHTML+=`<p style="background:#f0f0f0;padding:5px;border-radius:5px;"><b>${t.solutionText}</b> ${q.solution}</p>`;
    solutionList.appendChild(div);
  }

  const tabs=document.querySelectorAll(".tab");
  const questionsDivs=document.querySelectorAll(".question-card");
  tabs.forEach(tab=>{
    tab.addEventListener("click",()=>{
      tabs.forEach(t=>t.classList.remove("active"));
      tab.classList.add("active");
      let type=tab.dataset.type;
      questionsDivs.forEach(q=>{ q.style.display=q.classList.contains(type)?"block":"none"; });
    });
  });
  questionsDivs.forEach(q=>{ if(!q.classList.contains("correct")) q.style.display="none"; });
}

menuToggle.onclick=()=>{
  menuOverlay.classList.add("active");
  document.getElementById("test-section").classList.add("blur");
  renderQuestionNumbers();
};

popupBack.onclick=()=>{
  menuOverlay.classList.remove("active");
  document.getElementById("test-section").classList.remove("blur");
};

popupSubmit.onclick=()=>{
  showResult();
  menuOverlay.classList.remove("active");
  document.getElementById("test-section").classList.remove("blur");
};

prevBtn.onclick=()=>{ currentQ--; loadQuestion(); };
nextBtn.onclick=()=>{ currentQ++; loadQuestion(); };
submitBtn.onclick=showResult;

updateUI(currentLang);
loadQuestion();
startTimer();
</script>
</body>
</html>
