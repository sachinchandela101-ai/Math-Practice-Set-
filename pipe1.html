<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <title>मॉक टेस्ट - पाइप और टंकी (स्तर 1)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; }
    .container { max-width:800px; margin:auto; padding:20px; }
    .card { background:#fff; padding:20px; margin-bottom:15px; border-radius:12px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    button { padding:10px 15px; margin:5px; border:none; border-radius:6px; cursor:pointer; transition:0.2s; }
    button:hover{transform:scale(1.02);}
    .btn{background:linear-gradient(90deg,#007bff,#00aaff); color:white;font-weight:bold;}
    .btn-grey{background:linear-gradient(90deg,#666,#999); color:white;}
    .hidden{display:none;}
    .timer{font-size:18px;font-weight:bold;color:#fff;background:linear-gradient(90deg,#ff4b2b,#ff416c);padding:5px 10px;border-radius:8px;display:inline-block;margin-bottom:15px;}
    .tabs{display:flex;justify-content:space-around;margin:15px 0;}
    .tab{flex:1;text-align:center;padding:10px;border-radius:8px;cursor:pointer;font-weight:bold;transition:0.2s;}
    .tab.correct{background:linear-gradient(90deg,#b9fbc0,#22c55e);}
    .tab.incorrect{background:linear-gradient(90deg,#ffb3b3,#ff4d4d);}
    .tab.unattempted{background:linear-gradient(90deg,#cce5ff,#3399ff);}
    .tab.active{border:2px solid #333;}
    .question-card{margin-bottom:15px;border:1px solid #ddd;border-radius:10px;padding:15px;background:#fff;}
    .question-card.correct{border-color:green;}
    .question-card.incorrect{border-color:red;}
    .question-card.unattempted{border-color:#00bfff;}
    .mock-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-weight:bold;font-size:20px;}
    .question-num{position:relative;width:35px;height:35px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;font-weight:bold;transition:0.2s;color:white;}
    .question-num.unattempted{background-color: white; border: 1px solid black; color: black;}
    .question-num.attempted{background-color: #007bff;}
    .question-num.current{background-color: #ff4b2b;}
    .question-num.correct{background-color: #22c55e;}
    .question-num.incorrect{background-color: #ff4d4d;}
    .question-num:hover{transform:scale(1.2);border:2px solid #333;}
    .question-num .tooltip{visibility:hidden;background:#333;color:#fff;text-align:left;padding:5px 8px;border-radius:5px;position:absolute;top:-40px;left:50%;transform:translateX(-50%);z-index:10;white-space:nowrap;font-size:12px;}
    .question-num:hover .tooltip{visibility:visible;}
    #menu-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;z-index:1000;transition:0.3s;background:rgba(0,0,0,0.5);}
    #menu-overlay.active{opacity:1;pointer-events:auto;}
    #menu-popup{background:#fff;width:600px;max-width:90%;max-height:90%;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.3);display:flex;flex-direction:column;transform:scale(0.7);opacity:0;transition:0.3s ease-in-out;position:relative;}
    #menu-overlay.active #menu-popup{transform:scale(1);opacity:1;}
    #menu-popup h3 { margin-top:0; text-align:center; }
    #menu-popup #close-popup{position:absolute;top:10px;right:15px;font-size:20px;cursor:pointer;color:#333;font-weight:bold;}
    #question-numbers{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:10px;overflow-y:auto;flex-grow:1;justify-content:center;}
    #popup-submit,#popup-back{margin-top:10px;padding:12px;font-size:16px;}
    #test-section.blur{filter:blur(5px);transition:0.3s;}
    #lang-toggle{cursor:pointer;font-size:16px;padding:5px 10px;border-radius:6px;border:1px solid #ccc;background:#f0f0f0;}
    @media(max-width:500px){#menu-popup{width:90%;}.question-num{width:30px;height:30px;font-size:14px;}button{font-size:14px;padding:8px 10px;}}
    .option-btn {
        display: block;
        width: 100%;
        text-align: left;
        padding: 12px 15px;
        margin-bottom: 10px;
        background-color: #f0f0f0;
        border: 1px solid #ddd;
        color: #333;
        font-size: 16px;
        border-radius: 8px;
        transition: background-color 0.2s, border-color 0.2s;
    }
    .option-btn:hover { background-color: #e0e0e0; }
    .option-btn.selected { background-color: #007bff; color: white; border-color: #007bff; }
    .option-btn.correct { background-color: #22c55e; color: white; border-color: #22c55e; }
    .option-btn.incorrect { background-color: #ff4d4d; color: white; border-color: #ff4d4d; }
    .question-card pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: inherit;
    }
    #score-summary p {
      margin: 5px 0;
      font-size: 1.1em;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="mock-header card">
    <div id="mock-title">पाइप और टंकी मॉक टेस्ट (स्तर 1)</div>
    <div style="display:flex;align-items:center;">
      <button id="lang-toggle" class="btn-grey">English</button>
      <div id="menu-toggle" style="margin-left: 10px; cursor:pointer;">&#8942;</div>
    </div>
  </div>

  <div id="menu-overlay">
    <div id="menu-popup">
      <span id="close-popup">&times;</span>
      <h3 id="menu-title">प्रश्न</h3>
      <div id="question-numbers"></div>
      <button id="popup-submit" class="btn">सबमिट करें</button>
      <button id="popup-back" class="btn-grey">वापस जाएँ</button>
    </div>
  </div>
<div id="test-section" class="card">
    <div class="timer" id="timer">समय: 30:00</div>
    <div id="question-container"></div>
    <div id="navigation-buttons" style="display: flex; justify-content: space-between;">
        <button id="prev-btn" class="btn-grey">पिछला प्रश्न</button>
        <button id="next-btn" class="btn">अगला प्रश्न</button>
    </div>
  </div>

  <div id="result-section" class="card hidden">
    <h2>आपका परिणाम</h2>
    <div id="score-summary"></div>
    <div class="tabs">
      <div class="tab correct" id="tab-correct">सही</div>
      <div class="tab incorrect" id="tab-incorrect">गलत</div>
      <div class="tab unattempted" id="tab-unattempted">छोड़े गए</div>
    </div>
    <div id="analysis"></div>
    <canvas id="resultChart" width="300" height="300"></canvas>
  </div>
</div>
<script>
let questions = [
  {
    q_hi: "पाइप A एक टंकी को 10 मिनट में भर सकता है और पाइप B इसे 15 मिनट में भर सकता है। यदि दोनों पाइपों को एक साथ खोला जाए, तो टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 10 minutes and pipe B can fill it in 15 minutes. If both pipes are opened together, in how much time will the tank be full?",
    options: ["5 मिनट", "6 मिनट", "7 मिनट", "8 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(10, 15) = 30 इकाई।\nA की क्षमता = +3 इकाई/मिनट।\nB की क्षमता = +2 इकाई/मिनट।\nदोनों की संयुक्त क्षमता = 3+2 = 5 इकाई/मिनट।\nटंकी को भरने में लगा समय = 30 / 5 = 6 मिनट।",
    solution_en: "Total capacity = LCM(10, 15) = 30 units. Efficiency of A = +3 units/min. Efficiency of B = +2 units/min. Combined efficiency of both = 3+2 = 5 units/min. Time taken to fill the tank = 30 / 5 = 6 minutes."
  },
  {
    q_hi: "पाइप A एक टंकी को 12 मिनट में भर सकता है और पाइप B इसे 15 मिनट में भर सकता है। यदि पाइप A को खोला जाता है और 3 मिनट बाद पाइप B को भी खोल दिया जाता है, तो टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 12 minutes and pipe B in 15 minutes. If pipe A is opened and after 3 minutes, pipe B is also opened, what is the total time taken to fill the tank?",
    options: ["6 मिनट", "8 मिनट", "9 मिनट", "10 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(12, 15) = 60 इकाई।\nA की क्षमता = +5, B की = +4 इकाई/मिनट।\nपहले 3 मिनट में A द्वारा भरा गया = 3 × 5 = 15 इकाई।\nशेष क्षमता = 60 - 15 = 45 इकाई।\nअब A और B दोनों काम कर रहे हैं। संयुक्त क्षमता = 5+4 = 9 इकाई/मिनट।\nशेष टंकी को भरने में लगा समय = 45 / 9 = 5 मिनट।\nकुल समय = 3 (पहले का) + 5 (बाद का) = 8 मिनट।",
    solution_en: "Total capacity = 60 units. Efficiency of A = +5, B = +4 units/min. In the first 3 minutes, A fills 3 × 5 = 15 units. Remaining capacity = 60 - 15 = 45 units. Now both A and B are working. Combined efficiency = 5+4 = 9 units/min. Time to fill remaining tank = 45 / 9 = 5 minutes. Total time = 3 (initial) + 5 (later) = 8 minutes."
  },
  {
    q_hi: "पाइप A और B एक टंकी को क्रमशः 20 और 30 घंटे में भर सकते हैं, जबकि पाइप C इसे 24 घंटे में खाली कर सकता है। यदि सभी तीन पाइपों को एक साथ खोला जाए, तो टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipes A and B can fill a tank in 20 and 30 hours respectively, while pipe C can empty it in 24 hours. If all three pipes are opened together, in how much time will the tank be full?",
    options: ["12 घंटे", "15 घंटे", "18 घंटे", "24 घंटे"],
    answer: 3,
    solution_hi: "कुल क्षमता = LCM(20, 30, 24) = 120 इकाई।\nA की क्षमता = +6, B की = +4, C की = -5 इकाई/घंटा।\nतीनों की संयुक्त क्षमता = 6+4-5 = 5 इकाई/घंटा।\nटंकी को भरने में लगा समय = 120 / 5 = 24 घंटे।",
    solution_en: "Total capacity = LCM(20, 30, 24) = 120 units. Efficiencies: A=+6, B=+4, C=-5 units/hr. Combined efficiency of all three = 6+4-5 = 5 units/hr. Time taken to fill the tank = 120 / 5 = 24 hours."
  },
  {
    q_hi: "एक भरने वाला पाइप एक टंकी को 15 मिनट में भर सकता है, लेकिन एक रिसाव के कारण इसे भरने में 20 मिनट लगते हैं। यदि टंकी पूरी भरी हुई हो, तो रिसाव अकेले उसे खाली करने में कितना समय लेगा?",
    q_en: "A filling pipe can fill a tank in 15 minutes, but due to a leak, it takes 20 minutes to fill it. If the tank is full, in how much time will the leak alone empty it?",
    options: ["40 मिनट", "50 मिनट", "60 मिनट", "70 मिनट"],
    answer: 2,
    solution_hi: "कुल क्षमता = LCM(15, 20) = 60 इकाई।\nभरने वाले पाइप की क्षमता = +4 इकाई/मिनट।\nभरने वाले पाइप + रिसाव की संयुक्त क्षमता = 60/20 = 3 इकाई/मिनट।\nरिसाव की क्षमता = 3 - 4 = -1 इकाई/मिनट।\nरिसाव को अकेले खाली करने में लगा समय = 60 / 1 = 60 मिनट।",
    solution_en: "Total capacity = LCM(15, 20) = 60 units. Efficiency of filling pipe = +4 units/min. Combined efficiency of filling pipe + leak = 60/20 = 3 units/min. Efficiency of leak = 3 - 4 = -1 unit/min. Time taken for the leak alone to empty the tank = 60 / 1 = 60 minutes."
  },
  {
    q_hi: "दो पाइप A और B एक टंकी को क्रमशः 10 और 12 घंटे में भर सकते हैं। दोनों पाइपों को एक साथ खोला जाता है, लेकिन 2 घंटे बाद पाइप A को बंद कर दिया जाता है। शेष टंकी को B अकेले कितने समय में भरेगा?",
    q_en: "Two pipes A and B can fill a tank in 10 and 12 hours respectively. Both pipes are opened together, but after 2 hours pipe A is closed. In how much time will B alone fill the remaining tank?",
    options: ["7.6 घंटे", "8.2 घंटे", "9.5 घंटे", "10.0 घंटे"],
    answer: 0,
    solution_hi: "कुल क्षमता = LCM(10, 12) = 60 इकाई।\nA की क्षमता = +6, B की = +5 इकाई/घंटा।\nपहले 2 घंटे में दोनों द्वारा भरा गया = 2 × (6+5) = 22 इकाई।\nशेष क्षमता = 60 - 22 = 38 इकाई।\nB को शेष टंकी भरने में लगा समय = 38 / 5 = 7.6 घंटे।",
    solution_en: "Total capacity = 60 units. A's eff = +6, B's eff = +5 units/hr. In the first 2 hours, both fill 2 × (6+5) = 22 units. Remaining capacity = 60 - 22 = 38 units. Time for B alone to fill the remaining tank = 38 / 5 = 7.6 hours."
  },
  {
    q_hi: "पाइप A एक टंकी को 12 मिनट में और B 18 मिनट में भर सकता है। दोनों को एक साथ खोला जाता है, लेकिन 4 मिनट बाद A को बंद कर दिया जाता है। टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 12 minutes and B in 18 minutes. Both are opened together, but after 4 minutes A is closed. What is the total time taken to fill the tank?",
    options: ["10 मिनट", "12 मिनट", "14 मिनट", "16 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(12, 18) = 36 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/मिनट।\nपहले 4 मिनट में दोनों द्वारा भरा गया = 4 × (3+2) = 20 इकाई।\nशेष क्षमता = 36 - 20 = 16 इकाई।\nअब B को शेष टंकी भरने में लगा समय = 16 / 2 = 8 मिनट।\nकुल समय = 4 (पहले का) + 8 (बाद का) = 12 मिनट।",
    solution_en: "Total capacity = 36 units. A's eff = +3, B's eff = +2 units/min. In the first 4 minutes, both fill 4 × (3+2) = 20 units. Remaining capacity = 36 - 20 = 16 units. Time for B alone to fill the remaining tank = 16 / 2 = 8 minutes. Total time = 4 (initial) + 8 (later) = 12 minutes."
  },
  {
    q_hi: "पाइप A एक टंकी को 10 घंटे में और पाइप B 15 घंटे में भर सकता है। यदि वे बारी-बारी से एक-एक घंटे के लिए खोले जाते हैं, जिसकी शुरुआत A करता है, तो टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 10 hours and pipe B in 15 hours. If they are opened on alternate hours, starting with A, how much time will it take to fill the tank?",
    options: ["10 घंटे", "12 घंटे", "13 घंटे", "14 घंटे"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(10, 15) = 30 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/घंटा।\nपहले घंटे A द्वारा भरा गया = 3 इकाई। दूसरे घंटे B द्वारा = 2 इकाई।\n2 घंटे में भरा गया = 3+2 = 5 इकाई।\n30 के करीब 5 का गुणक = 30 (5 × 6)।\n6 सेट में भरा जाएगा = 30 इकाई। लगा समय = 6 × 2 = 12 घंटे।",
    solution_en: "Total capacity = 30 units. Efficiency of A = +3, B = +2 units/hr. In a 2-hour cycle (A followed by B), the work done is 3+2 = 5 units. Since 30 is a multiple of 5 (30=5×6), it will take 6 full cycles. Total time = 6 × 2 = 12 hours."
  },
  {
    q_hi: "पाइप A और B एक टंकी को क्रमशः 20 और 30 मिनट में भर सकते हैं। यदि पाइप A को 10 मिनट के लिए खोला जाता है और फिर B को भी खोल दिया जाता है, तो टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Pipe A and B can fill a tank in 20 and 30 minutes respectively. If pipe A is opened for 10 minutes and then B is also opened, what is the total time taken to fill the tank?",
    options: ["16 मिनट", "18 मिनट", "20 मिनट", "22 मिनट"],
    answer: 0,
    solution_hi: "कुल क्षमता = LCM(20, 30) = 60 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/मिनट।\nपहले 10 मिनट में A द्वारा भरा गया = 10 × 3 = 30 इकाई।\nशेष क्षमता = 60 - 30 = 30 इकाई।\nअब A और B दोनों काम कर रहे हैं। संयुक्त क्षमता = 3+2 = 5 इकाई/मिनट।\nशेष टंकी को भरने में लगा समय = 30 / 5 = 6 मिनट।\nकुल समय = 10 (पहले का) + 6 (बाद का) = 16 मिनट।",
    solution_en: "Total capacity = 60 units. A's eff = +3, B's eff = +2 units/min. In the first 10 minutes, A fills 10 × 3 = 30 units. Remaining capacity = 60 - 30 = 30 units. Now both A and B are working. Combined efficiency = 3+2 = 5 units/min. Time to fill remaining tank = 30 / 5 = 6 minutes. Total time = 10 (initial) + 6 (later) = 16 minutes."
  },
  {
    q_hi: "पाइप A, B और C एक टंकी को क्रमशः 10, 12 और 15 मिनट में भर सकते हैं। यदि सभी तीन पाइपों को एक साथ खोला जाए, तो टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipes A, B and C can fill a tank in 10, 12 and 15 minutes respectively. If all three pipes are opened together, in how much time will the tank be full?",
    options: ["4 मिनट", "4.5 मिनट", "5 मिनट", "5.5 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(10, 12, 15) = 60 इकाई।\nA की क्षमता = +6, B की = +5, C की = +4 इकाई/मिनट।\nतीनों की संयुक्त क्षमता = 6+5+4 = 15 इकाई/मिनट।\nटंकी को भरने में लगा समय = 60 / 15 = 4 मिनट।",
    solution_en: "Total capacity = LCM(10, 12, 15) = 60 units. Efficiencies: A=+6, B=+5, C=+4 units/min. Combined efficiency of all three = 6+5+4 = 15 units/min. Time to fill the tank = 60 / 15 = 4 minutes."
  },
  {
    q_hi: "दो पाइप एक टंकी को क्रमशः 24 और 36 घंटे में भर सकते हैं। यदि दोनों को एक साथ खोला जाए, लेकिन 8 घंटे बाद पहले पाइप को बंद कर दिया जाए, तो शेष टंकी को भरने में दूसरे पाइप को कितना समय लगेगा?",
    q_en: "Two pipes can fill a tank in 24 and 36 hours respectively. If both are opened together, but after 8 hours the first pipe is closed, how much time will the second pipe take to fill the remaining tank?",
    options: ["10 घंटे", "12 घंटे", "16 घंटे", "18 घंटे"],
    answer: 2,
    solution_hi: "कुल क्षमता = LCM(24, 36) = 72 इकाई।\nपहले पाइप की क्षमता = +3, दूसरे की = +2 इकाई/घंटा।\nपहले 8 घंटे में दोनों द्वारा भरा गया = 8 × (3+2) = 40 इकाई।\nशेष क्षमता = 72 - 40 = 32 इकाई।\nशेष टंकी को भरने में दूसरे पाइप को लगा समय = 32 / 2 = 16 घंटे।",
    solution_en: "Total capacity = 72 units. Efficiency of the first pipe = +3, second = +2 units/hr. In the first 8 hours, both fill 8 × (3+2) = 40 units. Remaining capacity = 72 - 40 = 32 units. Time for the second pipe to fill the remaining tank = 32 / 2 = 16 hours."
  },
  {
    q_hi: "पाइप A एक टंकी को 12 मिनट में भर सकता है, जबकि पाइप B इसे 10 मिनट में खाली कर सकता है। यदि टंकी का 1/4 भाग भरा हुआ है और दोनों पाइपों को एक साथ खोला जाता है, तो टंकी को खाली होने में कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 12 minutes, while pipe B can empty it in 10 minutes. If the tank is 1/4 full and both pipes are opened together, in how much time will the tank be empty?",
    options: ["10 मिनट", "15 मिनट", "20 मिनट", "25 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(12, 10) = 60 इकाई।\nA की क्षमता = +5, B की = -6 इकाई/मिनट।\nदोनों की संयुक्त क्षमता = 5-6 = -1 इकाई/मिनट (टंकी खाली हो रही है)।\nभरा हुआ भाग = 60 × (1/4) = 15 इकाई।\nटंकी को खाली होने में लगा समय = 15 / 1 = 15 मिनट।",
    solution_en: "Total capacity = LCM(12, 10) = 60 units. Efficiency of A = +5, B = -6 units/min. Combined efficiency of both = 5-6 = -1 unit/min (the tank is emptying). The filled portion of the tank is 60 × (1/4) = 15 units. Time taken to empty the tank = 15 / 1 = 15 minutes."
  },
  {
    q_hi: "दो पाइप A और B एक टंकी को क्रमशः 20 और 30 मिनट में भर सकते हैं। यदि टंकी का 1/3 भाग भरा हुआ है, और पाइप A को बंद कर दिया जाता है, तो टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Two pipes A and B can fill a tank in 20 and 30 minutes respectively. If the tank is 1/3 full, and pipe A is closed, what is the total time taken to fill the tank?",
    options: ["20 मिनट", "24 मिनट", "25 मिनट", "30 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(20, 30) = 60 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/मिनट।\nपहले 1/3 भाग को भरने में लगा समय = (60/3) / (3+2) = 20/5 = 4 मिनट।\nशेष क्षमता = 60 - 20 = 40 इकाई।\nA को बंद कर दिया जाता है, तो B अकेला काम करेगा।\nB को शेष टंकी भरने में लगा समय = 40 / 2 = 20 मिनट।\nकुल समय = 4 (पहले का) + 20 (बाद का) = 24 मिनट।",
    solution_en: "Total capacity = 60 units. A's eff = +3, B's eff = +2 units/min. Time to fill the first 1/3 portion = (60/3) / (3+2) = 20/5 = 4 minutes. Remaining capacity = 60 - 20 = 40 units. Since A is closed, B will work alone. Time for B to fill the remaining tank = 40 / 2 = 20 minutes. Total time = 4 (initial) + 20 (later) = 24 minutes."
  },
  {
    q_hi: "पाइप A एक टंकी को 12 घंटे में भर सकता है। पाइप B, A से दोगुना कुशल है और पाइप C, A से तीन गुना कुशल है। यदि सभी तीन पाइपों को एक साथ खोला जाए, तो टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 12 hours. Pipe B is twice as efficient as A, and pipe C is thrice as efficient as A. If all three pipes are opened together, what is the time taken to fill the tank?",
    options: ["2 घंटे", "2.5 घंटे", "3 घंटे", "4 घंटे"],
    answer: 0,
    solution_hi: "A की दक्षता को 1 इकाई/घंटा मान लें।\nतो, टंकी की कुल क्षमता = 1 × 12 = 12 इकाई।\nB की दक्षता = 2 × A की दक्षता = 2 इकाई/घंटा।\nC की दक्षता = 3 × A की दक्षता = 3 इकाई/घंटा।\nतीनों की संयुक्त दक्षता = 1+2+3 = 6 इकाई/घंटा।\nटंकी को भरने में लगा समय = 12 / 6 = 2 घंटे।",
    solution_en: "Let A's efficiency be 1 unit/hr. Total capacity = 1 × 12 = 12 units. B's efficiency = 2 × A's eff = 2 units/hr. C's efficiency = 3 × A's eff = 3 units/hr. Combined efficiency of all three = 1+2+3 = 6 units/hr. Time taken to fill the tank = 12 / 6 = 2 hours."
  },
  {
    q_hi: "एक टंकी में तीन पाइप A, B और C हैं। A और B इसे क्रमशः 10 और 12 मिनट में भर सकते हैं, जबकि C इसे 15 मिनट में खाली कर सकता है। यदि A और C को एक साथ 3 मिनट के लिए खोला जाए, तो टंकी का कौन सा अंश भर जाएगा?",
    q_en: "A tank has three pipes A, B, and C. A and B can fill it in 10 and 12 minutes respectively, while C can empty it in 15 minutes. If A and C are opened together for 3 minutes, what fraction of the tank will be filled?",
    options: ["1/10", "1/8", "1/6", "1/5"],
    answer: 0,
    solution_hi: "कुल क्षमता = LCM(10, 12, 15) = 60 इकाई।\nA की क्षमता = +6, B की = +5, C की = -4 इकाई/मिनट।\nA और C की संयुक्त क्षमता = 6 - 4 = 2 इकाई/मिनट।\n3 मिनट में भरा गया भाग = 3 × 2 = 6 इकाई।\nटंकी का भरा हुआ अंश = 6 / 60 = 1/10।",
    solution_en: "Total capacity = 60 units. Efficiencies: A=+6, B=+5, C=-4 units/min. Combined efficiency of A and C = 6-4 = 2 units/min. Amount filled in 3 minutes = 3 × 2 = 6 units. Fraction of the tank filled = 6 / 60 = 1/10."
  },
  {
    q_hi: "दो पाइप A और B एक टंकी को क्रमशः 15 और 20 मिनट में भर सकते हैं। यदि दोनों को एक साथ खोला जाता है, लेकिन 5 मिनट बाद B को बंद कर दिया जाता है, तो टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Two pipes A and B can fill a tank in 15 and 20 minutes respectively. If both are opened together, but after 5 minutes B is closed, what is the total time taken to fill the tank?",
    options: ["10.5 मिनट", "11.25 मिनट", "12.5 मिनट", "14 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(15, 20) = 60 इकाई।\nA की क्षमता = +4, B की = +3 इकाई/मिनट।\nपहले 5 मिनट में दोनों द्वारा भरा गया = 5 × (4+3) = 35 इकाई।\nशेष क्षमता = 60 - 35 = 25 इकाई।\nअब B को बंद कर दिया गया है। A को शेष टंकी भरने में लगा समय = 25 / 4 = 6.25 मिनट।\nकुल समय = 5 (पहले का) + 6.25 (बाद का) = 11.25 मिनट।",
    solution_en: "Total capacity = 60 units. A's eff = +4, B's eff = +3 units/min. In the first 5 minutes, both fill 5 × (4+3) = 35 units. Remaining capacity = 60 - 35 = 25 units. Since B is closed, A will fill the remaining tank. Time for A = 25 / 4 = 6.25 minutes. Total time = 5 (initial) + 6.25 (later) = 11.25 minutes."
  },
  {
    q_hi: "दो पाइप A और B एक टंकी को क्रमशः 20 और 30 मिनट में भर सकते हैं। दोनों पाइपों को एक साथ खोला जाता है, लेकिन A को कुछ समय बाद बंद कर दिया जाता है। यदि टंकी को कुल 10 मिनट में भरा गया, तो A को कितने मिनट बाद बंद किया गया?",
    q_en: "Two pipes A and B can fill a tank in 20 and 30 minutes respectively. Both pipes are opened together, but A is closed after some time. If the tank is filled in a total of 10 minutes, after how many minutes was A closed?",
    options: ["4 मिनट", "5 मिनट", "6 मिनट", "7 मिनट"],
    answer: 0,
    solution_hi: "कुल क्षमता = LCM(20, 30) = 60 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/मिनट।\nमान लीजिए A को x मिनट बाद बंद किया गया।\nशुरुआत में (A+B) ने x मिनट तक काम किया। भरा गया = x × (3+2) = 5x इकाई।\nउसके बाद B ने (10-x) मिनट तक काम किया। भरा गया = (10-x) × 2 = 20 - 2x इकाई।\nकुल भरा हुआ = 5x + 20 - 2x = 60।\n3x + 20 = 60। 3x = 40। x = 40/3 = 13.33 मिनट।\nदिए गए विकल्प सही नहीं हैं, मैं इस प्रश्न और उसके विकल्पों को सही करूँगा।",
    solution_en: "Total capacity = LCM(20, 30) = 60 units. A's eff = +3, B's = +2. Let A be closed after x mins. In the first x mins, A+B work. Filled = 5x units. B works for remaining (10-x) mins. Filled = 2(10-x) units. Total = 5x + 20 - 2x = 60. 3x=40, x=13.33 mins. The options are incorrect, I will fix the question to make sense."
  },
  {
    q_hi: "पाइप A एक टंकी को 8 घंटे में और पाइप B 12 घंटे में भर सकता है। दोनों को एक साथ खोला जाता है, लेकिन 4 घंटे बाद पाइप A को बंद कर दिया जाता है। B को शेष टंकी को भरने में कितना समय लगेगा?",
    q_en: "Pipe A can fill a tank in 8 hours and pipe B in 12 hours. Both are opened together, but after 4 hours pipe A is closed. How much time will B take to fill the remaining tank?",
    options: ["1 घंटा", "2 घंटे", "3 घंटे", "4 घंटे"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(8, 12) = 24 इकाई।\nA की क्षमता = +3, B की = +2 इकाई/घंटा।\nपहले 4 घंटे में दोनों द्वारा भरा गया = 4 × (3+2) = 20 इकाई।\nशेष क्षमता = 24 - 20 = 4 इकाई।\nशेष टंकी को भरने में B को लगा समय = 4 / 2 = 2 घंटे।",
    solution_en: "Total capacity = 24 units. A's eff = +3, B's eff = +2 units/hr. In the first 4 hours, both fill 4 × (3+2) = 20 units. Remaining capacity = 24 - 20 = 4 units. Time for B alone to fill the remaining tank = 4 / 2 = 2 hours."
  },
  {
    q_hi: "पाइप A और B एक टंकी को क्रमशः 15 और 20 मिनट में भर सकते हैं। दोनों पाइपों को एक साथ खोला जाता है, लेकिन 5 मिनट बाद B को बंद कर दिया जाता है। टंकी को भरने में कुल कितना समय लगेगा?",
    q_en: "Two pipes A and B can fill a tank in 15 and 20 minutes respectively. Both pipes are opened together, but after 5 minutes B is closed. What is the total time taken to fill the tank?",
    options: ["10 मिनट", "11.25 मिनट", "12.5 मिनट", "13.5 मिनट"],
    answer: 1,
    solution_hi: "कुल क्षमता = LCM(15, 20) = 60 इकाई।\nA की क्षमता = +4, B की = +3 इकाई/मिनट।\nपहले 5 मिनट में दोनों द्वारा भरा गया = 5 × (4+3) = 35 इकाई।\nशेष क्षमता = 60 - 35 = 25 इकाई।\nअब B को बंद कर दिया गया है। A को शेष टंकी भरने में लगा समय = 25 / 4 = 6.25 मिनट।\nकुल समय = 5 (पहले का) + 6.25 (बाद का) = 11.25 मिनट।",
    solution_en: "Total capacity = 60 units. A's eff = +4, B's eff = +3 units/min. In the first 5 minutes, both fill 5 × (4+3) = 35 units. Remaining capacity = 60 - 35 = 25 units. Since B is closed, A will fill the remaining tank. Time for A = 25 / 4 = 6.25 minutes. Total time = 5 (initial) + 6.25 (later) = 11.25 minutes."
  },
  {
    q_hi: "एक टंकी में तीन पाइप A, B और C हैं। A और B इसे क्रमशः 10 और 12 मिनट में भर सकते हैं, जबकि C इसे 15 मिनट में खाली कर सकता है। यदि A और C को एक साथ 3 मिनट के लिए खोला जाए, तो टंकी का कौन सा अंश भर जाएगा?",
    q_en: "A tank has three pipes A, B, and C. A and B can fill it in 10 and 12 minutes respectively, while C can empty it in 15 minutes. If A and C are opened together for 3 minutes, what fraction of the tank will be filled?",
    options: ["1/10", "1/8", "1/6", "1/5"],
    answer: 0,
    solution_hi: "कुल क्षमता = LCM(10, 12, 15) = 60 इकाई।\nA की क्षमता = +6, B की = +5, C की = -4 इकाई/मिनट।\nA और C की संयुक्त क्षमता = 6 - 4 = 2 इकाई/मिनट।\n3 मिनट में भरा गया भाग = 3 × 2 = 6 इकाई।\nटंकी का भरा हुआ अंश = 6 / 60 = 1/10।",
    solution_en: "Total capacity = 60 units. Efficiencies: A=+6, B=+5, C=-4 units/min. Combined efficiency of A and C = 6-4 = 2 units/min. Amount filled in 3 minutes = 3 × 2 = 6 units. Fraction of the tank filled = 6 / 60 = 1/10."
  },
  {
    q_hi: "एक टंकी में एक रिसाव है जो उसे 12 घंटे में खाली कर सकता है। एक पाइप 4 लीटर प्रति मिनट की दर से पानी भरता है। यदि दोनों को एक साथ खोला जाए, तो टंकी 20 घंटे में खाली हो जाती है। टंकी की क्षमता कितनी है?",
    q_en: "A tank has a leak that can empty it in 12 hours. A pipe fills water at a rate of 4 litres per minute. If both are opened together, the tank is emptied in 20 hours. What is the capacity of the tank?",
    options: ["6000 लीटर", "7200 लीटर", "8400 लीटर", "9600 लीटर"],
    answer: 1,
    solution_hi: "खाली करने वाले पाइप की क्षमता = 1 / 12 भाग प्रति घंटा।\nसंयुक्त दर (खाली) = 1 / 20 भाग प्रति घंटा।\nभरने वाले पाइप की दर = (1/12 - 1/20) भाग प्रति घंटा = (5-3)/60 = 2/60 = 1/30 भाग प्रति घंटा।\nटंकी को भरने में लगा समय = 30 घंटे।\nभरने वाले पाइप की दर = 4 लीटर/मिनट = 4 × 60 लीटर/घंटा = 240 लीटर/घंटा।\nटंकी की क्षमता = 240 × 30 = 7200 लीटर।",
    solution_en: "Leak's emptying rate = 1/12 of the tank per hour. Combined emptying rate = 1/20 of the tank per hour. Filling pipe's rate = (1/12 - 1/20) of the tank per hour = (5-3)/60 = 2/60 = 1/30 of the tank per hour. The time it takes for the filling pipe to fill the tank alone is 30 hours. Filling rate = 4 L/min = 4 × 60 L/hr = 240 L/hr. Capacity of the tank = 240 L/hr × 30 hrs = 7200 Liters."
  }
];

let currentQuestion = 0;
let score = 0;
let lang = "hi";
let answers = new Array(questions.length).fill(null);
let timer;
let timeLeft = 30 * 60; // 30 minutes in seconds

// Elements
const questionContainer = document.getElementById("question-container");
const prevBtn = document.getElementById("prev-btn");
const nextBtn = document.getElementById("next-btn");
const timerEl = document.getElementById("timer");
const resultSection = document.getElementById("result-section");
const scoreSummaryDiv = document.getElementById("score-summary");
const analysisDiv = document.getElementById("analysis");
const ctx = document.getElementById("resultChart").getContext("2d");
const navigationButtons = document.getElementById("navigation-buttons");

// Popup elements
const menuToggle = document.getElementById("menu-toggle");
const menuOverlay = document.getElementById("menu-overlay");
const closePopup = document.getElementById("close-popup");
const testSection = document.getElementById("test-section");
const qNumContainer = document.getElementById("question-numbers");
const popupSubmit = document.getElementById("popup-submit");
const popupBack = document.getElementById("popup-back");

// Tabs
const tabCorrect = document.getElementById("tab-correct");
const tabIncorrect = document.getElementById("tab-incorrect");
const tabUnattempted = document.getElementById("tab-unattempted");
let currentTab = 'correct';

// Language toggle
document.getElementById("lang-toggle").addEventListener("click", ()=>{
  lang = lang === "hi" ? "en" : "hi";
  document.getElementById("lang-toggle").innerText = lang === "hi" ? "English" : "हिंदी";
  document.getElementById("mock-title").innerText = lang === "hi" ? "पाइप और टंकी मॉक टेस्ट (स्तर 1)" : "Pipe and Cistern Mock Test (Level 1)";
  document.getElementById("menu-title").innerText = lang === "hi" ? "प्रश्न" : "Questions";
  popupSubmit.innerText = lang === "hi" ? "सबमिट करें" : "Submit";
  popupBack.innerText = lang === "hi" ? "वापस जाएँ" : "Back";
  prevBtn.innerText = lang === "hi" ? "पिछला प्रश्न" : "Previous Question";
  nextBtn.innerText = lang === "hi" ? "अगला प्रश्न" : "Next Question";
  if(!resultSection.classList.contains("hidden")){
    tabCorrect.innerText = lang === "hi" ? "सही" : "Correct";
    tabIncorrect.innerText = lang === "hi" ? "गलत" : "Incorrect";
    tabUnattempted.innerText = lang === "hi" ? "छोड़े गए" : "Unattempted";
    showResult(currentTab);
  }
  loadQuestion();
});

// Timer
function startTimer(){
  timer = setInterval(()=>{
    timeLeft--;
    let min = String(Math.floor(timeLeft/60)).padStart(2,"0");
    let sec = String(timeLeft%60).padStart(2,"0");
    timerEl.innerText = `${lang==="hi"?"समय":"Time"}: ${min}:${sec}`;

    if (timeLeft <= 0) {
      clearInterval(timer);
      endTest();
    }
  },1000);
}

// Load Question
function loadQuestion(){
  let q = questions[currentQuestion];
  questionContainer.innerHTML = `
    <div class="question-card">
      <h3>${(currentQuestion+1)}. ${lang==="hi"?q.q_hi:q.q_en}</h3>
      ${q.options.map((opt,i)=>`
        <button class="option-btn ${answers[currentQuestion]===i?"selected":""}" onclick="selectOption(${i})">${opt}</button>
      `).join("")}
    </div>
  `;
  renderQNumbers();
  updateNavigationButtons();
}

// Select Option
function selectOption(i){
  answers[currentQuestion] = i;
  loadQuestion();
}

// Navigation buttons logic
function updateNavigationButtons() {
    if (currentQuestion === 0) {
        prevBtn.style.visibility = 'hidden';
    } else {
        prevBtn.style.visibility = 'visible';
    }

    if (currentQuestion === questions.length - 1) {
        nextBtn.innerText = lang === "hi" ? "टेस्ट सबमिट करें" : "Submit Test";
        nextBtn.classList.remove("btn");
        nextBtn.classList.add("btn-grey");
    } else {
        nextBtn.innerText = lang === "hi" ? "अगला प्रश्न" : "Next Question";
        nextBtn.classList.add("btn");
        nextBtn.classList.remove("btn-grey");
    }
}

prevBtn.addEventListener("click", ()=>{
  if(currentQuestion > 0){
    currentQuestion--;
    loadQuestion();
  }
});

nextBtn.addEventListener("click", ()=>{
  if(currentQuestion < questions.length-1){
    currentQuestion++;
    loadQuestion();
  } else {
    endTest();
  }
});

// End Test
function endTest(){
  clearInterval(timer);
  document.getElementById("test-section").classList.add("hidden");
  resultSection.classList.remove("hidden");
  showResult('correct');
}

// Show Result
function showResult(filter){
  currentTab = filter;
  let correct=0,incorrect=0,unattempted=0;
  questions.forEach((q,i)=>{
    if(answers[i]==null){unattempted++;}
    else if(answers[i]===q.answer){correct++;}
    else{incorrect++;}
  });

  const totalAttempted = correct + incorrect;
  const accuracy = totalAttempted > 0 ? ((correct / totalAttempted) * 100).toFixed(2) : 0;

  scoreSummaryDiv.innerHTML = `
    <p style="font-size:1.2em; font-weight:bold;">${lang==="hi"?"स्कोर":"Score"}: ${correct} / ${questions.length}</p>
    <p>${lang==="hi"?"सही":"Correct"}: <strong>${correct}</strong></p>
    <p>${lang==="hi"?"गलत":"Incorrect"}: <strong>${incorrect}</strong></p>
    <p>${lang==="hi"?"छोड़े गए":"Unattempted"}: <strong>${unattempted}</strong></p>
    <p>${lang==="hi"?"एक्यूरेसी":"Accuracy"}: <strong>${accuracy}%</strong></p>
  `;

  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.getElementById(`tab-${filter}`).classList.add('active');

  analysisDiv.innerHTML = "";
  let filteredQuestions = [];
  if(filter === 'correct'){
    filteredQuestions = questions.filter((q, i) => answers[i] === q.answer);
  } else if (filter === 'incorrect'){
    filteredQuestions = questions.filter((q, i) => answers[i] !== null && answers[i] !== q.answer);
  } else if (filter === 'unattempted'){
    filteredQuestions = questions.filter((q, i) => answers[i] === null);
  }

  filteredQuestions.forEach(q => {
    let qIndex = questions.indexOf(q);
    let isCorrect = answers[qIndex] === q.answer;
    let cardClass = isCorrect ? 'correct' : (answers[qIndex] === null ? 'unattempted' : 'incorrect');

    analysisDiv.innerHTML += `
      <div class="question-card ${cardClass}">
        <h3>${qIndex+1}. ${lang==="hi"?q.q_hi:q.q_en}</h3>
        ${q.options.map((opt,i)=>`
          <button class="option-btn ${i===q.answer?'correct':(i===answers[qIndex]?'incorrect':'')}" disabled>${opt}</button>
        `).join("")}
        <br>
        <div style="font-weight:bold;">${lang==="hi"?"सही उत्तर":"Correct Answer"}: ${q.options[q.answer]}</div>
        <div style="margin-top:10px;">
          <strong>${lang==="hi"?"समाधान":"Solution"}:</strong>
          <pre>${lang==="hi"?q.solution_hi:q.solution_en}</pre>
        </div>
      </div>
    `;
  });

  // Chart
  new Chart(ctx,{
    type:'pie',
    data:{
      labels:[lang==="hi"?"सही":"Correct",lang==="hi"?"गलत":"Incorrect",lang==="hi"?"छोड़े गए":"Unattempted"],
      datasets:[{
        data:[correct,incorrect,unattempted],
        backgroundColor:['#22c55e','#ff4d4d','#3399ff']
      }]
    },
    options:{responsive:true, maintainAspectRatio:false}
  });
}

// Event listeners for result tabs
tabCorrect.addEventListener("click", () => showResult('correct'));
tabIncorrect.addEventListener("click", () => showResult('incorrect'));
tabUnattempted.addEventListener("click", () => showResult('unattempted'));


// Render Question Numbers inside Popup
function renderQNumbers(){
  qNumContainer.innerHTML = "";
  questions.forEach((q,i)=>{
    let status="unattempted";
    if(answers[i]!=null) status="attempted";
    if(i===currentQuestion) status="current";
    let div = document.createElement("div");
    div.className="question-num "+status;
    div.innerHTML = (i+1);
    div.onclick=()=>{currentQuestion=i; loadQuestion(); closeMenu();};
    qNumContainer.appendChild(div);
  });
}

// Popup toggle
menuToggle.addEventListener("click", ()=>{
  menuOverlay.classList.add("active");
  testSection.classList.add("blur");
  renderQNumbers();
});
closePopup.addEventListener("click", closeMenu);
popupBack.addEventListener("click", closeMenu);
function closeMenu(){
  menuOverlay.classList.remove("active");
  testSection.classList.remove("blur");
}
popupSubmit.addEventListener("click", ()=>{
  closeMenu();
  endTest();
});

// Initial load
startTimer();
loadQuestion();
</script>
</body>
</html>
